/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../auth/grpc/auth_pb_service.js":
/*!***************************************!*\
  !*** ../auth/grpc/auth_pb_service.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// package: grpc
// file: auth.proto

var auth_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module './auth_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var google_protobuf_empty_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module 'google-protobuf/google/protobuf/empty_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var github_com_elojah_game_02_pkg_lobby_lobby_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module './github.com/elojah/game_02/pkg/lobby/lobby_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var github_com_elojah_game_02_pkg_player_player_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module './github.com/elojah/game_02/pkg/player/player_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var github_com_elojah_game_02_pkg_room_room_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module './github.com/elojah/game_02/pkg/room/room_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var github_com_elojah_game_02_pkg_account_dto_account_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module './github.com/elojah/game_02/pkg/account/dto/account_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var github_com_elojah_game_02_pkg_room_dto_room_pb = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module './github.com/elojah/game_02/pkg/room/dto/room_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
var grpc = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module '@improbable-eng/grpc-web'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())).grpc;

var Auth = (function () {
  function Auth() {}
  Auth.serviceName = "grpc.Auth";
  return Auth;
}());

Auth.Subscribe = {
  methodName: "Subscribe",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_account_dto_account_pb.Subscribe,
  responseType: google_protobuf_empty_pb.Empty
};

Auth.Unsubscribe = {
  methodName: "Unsubscribe",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_account_dto_account_pb.Unsubscribe,
  responseType: google_protobuf_empty_pb.Empty
};

Auth.Signin = {
  methodName: "Signin",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_account_dto_account_pb.Signin,
  responseType: github_com_elojah_game_02_pkg_account_dto_account_pb.Token
};

Auth.Signout = {
  methodName: "Signout",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_account_dto_account_pb.Auth,
  responseType: google_protobuf_empty_pb.Empty
};

Auth.ListLobbies = {
  methodName: "ListLobbies",
  service: Auth,
  requestStream: false,
  responseStream: true,
  requestType: github_com_elojah_game_02_pkg_account_dto_account_pb.Auth,
  responseType: github_com_elojah_game_02_pkg_lobby_lobby_pb.L
};

Auth.CreateRoom = {
  methodName: "CreateRoom",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_room_dto_room_pb.Create,
  responseType: github_com_elojah_game_02_pkg_room_room_pb.R
};

Auth.ConnectRoom = {
  methodName: "ConnectRoom",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_room_dto_room_pb.Connect,
  responseType: github_com_elojah_game_02_pkg_room_room_pb.R
};

Auth.CreatePlayer = {
  methodName: "CreatePlayer",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: github_com_elojah_game_02_pkg_room_dto_room_pb.Create,
  responseType: github_com_elojah_game_02_pkg_player_player_pb.P
};

exports.Auth = Auth;

function AuthClient(serviceHost, options) {
  this.serviceHost = serviceHost;
  this.options = options || {};
}

AuthClient.prototype.subscribe = function subscribe(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.Subscribe, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.unsubscribe = function unsubscribe(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.Unsubscribe, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.signin = function signin(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.Signin, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.signout = function signout(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.Signout, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.listLobbies = function listLobbies(requestMessage, metadata) {
  var listeners = {
    data: [],
    end: [],
    status: []
  };
  var client = grpc.invoke(Auth.ListLobbies, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onMessage: function (responseMessage) {
      listeners.data.forEach(function (handler) {
        handler(responseMessage);
      });
    },
    onEnd: function (status, statusMessage, trailers) {
      listeners.status.forEach(function (handler) {
        handler({ code: status, details: statusMessage, metadata: trailers });
      });
      listeners.end.forEach(function (handler) {
        handler({ code: status, details: statusMessage, metadata: trailers });
      });
      listeners = null;
    }
  });
  return {
    on: function (type, handler) {
      listeners[type].push(handler);
      return this;
    },
    cancel: function () {
      listeners = null;
      client.close();
    }
  };
};

AuthClient.prototype.createRoom = function createRoom(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.CreateRoom, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.connectRoom = function connectRoom(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.ConnectRoom, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.createPlayer = function createPlayer(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }
  var client = grpc.unary(Auth.CreatePlayer, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function (response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function () {
      callback = null;
      client.close();
    }
  };
};

exports.AuthClient = AuthClient;



/***/ }),

/***/ "./node_modules/@improbable-eng/grpc-web/dist/grpc-web-client.umd.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@improbable-eng/grpc-web/dist/grpc-web-client.umd.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(e,t){if(true)module.exports=t();else { var n, r; }}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.Metadata=n.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(8),s=r(9),i=r(1),a=r(4),u=r(14);t.client=function(e,t){return new d(e,t)};var d=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new o.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&i.debug("onHeaders",e,t),this.closed)this.props.debug&&i.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&i.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var r=c(e);this.props.debug&&i.debug("onHeaders.gRPCStatus",r);var n=r&&r>=0?r:s.httpStatusToCode(t);this.props.debug&&i.debug("onHeaders.code",n);var o=e.get("grpc-message")||[];if(this.props.debug&&i.debug("onHeaders.gRPCMessage",o),this.rawOnHeaders(e),n!==s.Code.OK){var a=this.decodeGRPCStatus(o[0]);this.rawOnError(n,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&i.debug("grpc.onChunk received after request was closed - ignoring");else{var r=[];try{r=this.parser.parse(e)}catch(e){return this.props.debug&&i.debug("onChunk.parsing error",e,e.message),void this.rawOnError(s.Code.Internal,"parsing error: "+e.message)}r.forEach(function(e){if(e.chunkType===o.ChunkType.MESSAGE){var r=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(r)}else e.chunkType===o.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new n.Metadata(e.trailers),t.props.debug&&i.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new n.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))})}},e.prototype.onTransportEnd=function(){if(this.props.debug&&i.debug("grpc.onEnd"),this.closed)this.props.debug&&i.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=c(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),r=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,r,this.responseTrailers)}else this.rawOnError(s.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(s.Code.Unknown,"Response closed without headers");var n=c(this.responseHeaders),o=this.responseHeaders.get("grpc-message");if(this.props.debug&&i.debug("grpc.headers only response ",n,o),null===n)return void this.rawOnEnd(s.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(o[0]);this.rawOnEnd(n,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,r){var n=this;this.props.debug&&i.debug("rawOnEnd",e,t,r),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(o){if(!n.closed)try{o(e,t,r)}catch(e){setTimeout(function(){throw e})}}))},e.prototype.rawOnHeaders=function(e){this.props.debug&&i.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach(function(t){try{t(e)}catch(e){setTimeout(function(){throw e})}})},e.prototype.rawOnError=function(e,t,r){var o=this;void 0===r&&(r=new n.Metadata),this.props.debug&&i.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(n){if(!o.closed)try{n(e,t,r)}catch(e){setTimeout(function(){throw e})}}))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&i.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(r){if(!t.closed)try{r(e)}catch(e){setTimeout(function(){throw e})}})},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new n.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=u.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&i.debug("request.abort aborting request"),this.transport.cancel()},e}();function c(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var r=t[0];return parseInt(r,10)}catch(e){return null}return null}},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);var o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,o=this;if(this.headersMap={},e)if("undefined"!=typeof Headers&&e instanceof Headers)n.getHeaderKeys(e).forEach(function(r){n.getHeaderValues(e,r).forEach(function(e){t.splitValues?o.append(r,n.splitHeaderValue(e)):o.append(r,e)})});else if("object"==typeof(r=e)&&"object"==typeof r.headersMap&&"function"==typeof r.forEach)e.forEach(function(e,t){o.append(e,t)});else if("undefined"!=typeof Map&&e instanceof Map){e.forEach(function(e,t){o.append(t,e)})}else"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];Array.isArray(r)?r.forEach(function(e){o.append(t,e)}):o.append(t,r)})}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),r=0;r<t.length;r++){var n=t[r],o=n.indexOf(":");if(o>0){var s=n.substring(0,o).trim(),i=n.substring(o+1).trim();this.append(s,i)}}},e.prototype.delete=function(e,t){var r=n.normalizeName(e);if(void 0===t)delete this.headersMap[r];else{var o=this.headersMap[r];if(o){var s=o.indexOf(t);s>=0&&o.splice(s,1),0===o.length&&delete this.headersMap[r]}}},e.prototype.append=function(e,t){var r=this,o=n.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach(function(e){r.headersMap[o].push(n.normalizeValue(e))}):this.headersMap[o].push(n.normalizeValue(t))},e.prototype.set=function(e,t){var r=n.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach(function(e){o.push(n.normalizeValue(e))}),this.headersMap[r]=o}else this.headersMap[r]=[n.normalizeValue(t)]},e.prototype.has=function(e,t){var r=this.headersMap[n.normalizeName(e)];if(!Array.isArray(r))return!1;if(void 0!==t){var o=n.normalizeValue(t);return r.indexOf(o)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[n.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(r){e(r,t.headersMap[r])},this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach(function(t,r){r.forEach(function(r){e.append(t,r)})}),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.BrowserHeaders=n.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),n=r.next();!n.done;)t(n.value[0]),n=r.next()},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),n=r.next();!n.done;)t(n.value),n=r.next()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);function o(e){return e}t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=o(e);if(r instanceof Headers&&r.getAll)return r.getAll(t);var n=r.get(t);return n&&"string"==typeof n?[n]:n},t.getHeaderKeys=function(e){var t=o(e),r={},s=[];return t.keys?n.iterateHeadersKeys(t,function(e){r[e]||(r[e]=!0,s.push(e))}):t.forEach?t.forEach(function(e,t){r[t]||(r[t]=!0,s.push(t))}):n.iterateHeaders(t,function(e){var t=e[0];r[t]||(r[t]=!0,s.push(t))}),s},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach(function(e){e.split(",").forEach(function(e){t.push(e)})}),t}}])},e.exports=n()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=function(e){return n.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){o=e},t.makeDefaultTransport=function(e){return o(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=r(7);t.CrossBrowserHttpTransport=function(e){if(n.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return n.FetchReadableStreamTransport(t)}return o.XhrTransport({withCredentials:e.withCredentials})}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(1);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&s.debug("fetchRequest",e),new i(e,t)}(t,e)}};var i=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var r=this;if(this.reader=e,this.cancelled)return this.options.debug&&s.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel();this.reader.read().then(function(e){if(e.done)return r.options.onEnd(),t;r.options.onChunk(e.value),r.pump(r.reader,t)}).catch(function(e){r.cancelled?r.options.debug&&s.debug("Fetch.catch - request cancelled"):(r.cancelled=!0,r.options.debug&&s.debug("Fetch.catch",e.message),r.options.onEnd(e))})},e.prototype.send=function(e){var t=this;fetch(this.options.url,n({},this.init,{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then(function(e){if(t.options.debug&&s.debug("Fetch.response",e),t.options.onHeaders(new o.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)}).catch(function(e){t.cancelled?t.options.debug&&s.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&s.debug("Fetch.catch",e.message),t.options.onEnd(e))})},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){this.cancelled?this.options.debug&&s.debug("Fetch.abort.cancel already cancelled"):(this.cancelled=!0,this.reader?(this.options.debug&&s.debug("Fetch.abort.cancel"),this.reader.cancel()):this.options.debug&&s.debug("Fetch.abort.cancel before reader"),this.controller&&this.controller.abort())},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),i=r(1),a=r(11);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new d(t,e);if(a.detectXHROverrideMimeTypeSupport())return new u(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var u=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&i.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=p(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&i.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&i.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new s.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var r=new XMLHttpRequest;this.xhr=r,r.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(e,t){r.setRequestHeader(e,t.join(", "))}),r.withCredentials=Boolean(this.init.withCredentials),r.addEventListener("readystatechange",this.onStateChange.bind(this)),r.addEventListener("progress",this.onProgressEvent.bind(this)),r.addEventListener("loadend",this.onLoadEvent.bind(this)),r.addEventListener("error",function(e){t.options.debug&&i.debug("XHR.error",e),t.options.onEnd(e.error)})},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&i.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=u;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.configureXhr=function(){this.options.debug&&i.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&i.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(u);function c(e,t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(r=65536+(r-55296<<10)+(n-56320))}return r}function p(e){for(var t=new Uint8Array(e.length),r=0,n=0;n<e.length;n++){var o=String.prototype.codePointAt?e.codePointAt(n):c(e,n);t[r++]=255&o}return t}t.MozChunkedArrayBufferXHR=d,t.stringToArrayBuffer=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(0),s=function(e){return 9===e||10===e||13===e};function i(e){return s(e)||e>=32&&e<=126}function a(e){for(var t=0;t!==e.length;++t)if(!i(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function u(e){return 128==(128&e.getUint8(0))}function d(e){return e.getUint32(1,!1)}function c(e,t,r){return e.byteLength-t>=r}function p(e,t,r){if(e.slice)return e.slice(t,r);var n=e.length;void 0!==r&&(n=r);for(var o=new Uint8Array(n-t),s=0,i=t;i<n;i++)o[s++]=e[i];return o}t.decodeASCII=a,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),r=0;r!==e.length;++r){var n=e.charCodeAt(r);if(!i(n))throw new Error("Metadata contains invalid ASCII");t[r]=n}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(n=t.ChunkType||(t.ChunkType={}));var h=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var r,s=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var i=this.buffer.byteLength-this.position,h=new Uint8Array(i+e.byteLength),f=p(this.buffer,this.position);h.set(f,0);var l=new Uint8Array(e);h.set(l,i),this.buffer=h,this.position=0}for(;;){if(!c(this.buffer,this.position,5))return s;var g=p(this.buffer,this.position,this.position+5),b=new DataView(g.buffer,g.byteOffset,g.byteLength),y=d(b);if(!c(this.buffer,this.position,5+y))return s;var v=p(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,u(b))return s.push({chunkType:n.TRAILERS,trailers:(r=v,new o.Metadata(a(r)))}),s;s.push({chunkType:n.MESSAGE,data:v})}},e}();t.ChunkParser=h},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(n=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return n.Internal;case 200:return n.OK;case 400:return n.InvalidArgument;case 401:return n.Unauthenticated;case 403:return n.PermissionDenied;case 404:return n.NotFound;case 409:return n.Aborted;case 412:return n.FailedPrecondition;case 429:return n.ResourceExhausted;case 499:return n.Canceled;case 500:return n.Unknown;case 501:return n.Unimplemented;case 503:return n.Unavailable;case 504:return n.DeadlineExceeded;default:return n.Unknown}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=r(4),s=r(6),i=r(12),a=r(7),u=r(5),d=r(9),c=r(13),p=r(15),h=r(2);!function(e){e.setDefaultTransport=o.setDefaultTransportFactory,e.CrossBrowserHttpTransport=u.CrossBrowserHttpTransport,e.FetchReadableStreamTransport=s.FetchReadableStreamTransport,e.XhrTransport=a.XhrTransport,e.WebsocketTransport=i.WebsocketTransport,e.Code=d.Code,e.Metadata=n.BrowserHeaders,e.client=function(e,t){return h.client(e,t)},e.invoke=c.invoke,e.unary=p.unary}(t.grpc||(t.grpc={}))},function(e,t,r){"use strict";var n;function o(){if(void 0!==n)return n;if(XMLHttpRequest){n=new XMLHttpRequest;try{n.open("GET","https://localhost")}catch(e){}}return n}function s(e){var t=o();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.xhrSupportsResponseType=s,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&s("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(1),s=r(8);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(n||(n={}));var i=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&o.debug("websocketRequest",e);var t,r=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function u(e){if(e===n.FINISH_SEND)t.send(i);else{var r=e,o=new Int8Array(r.byteLength+1);o.set(new Uint8Array([0])),o.set(r,1),t.send(o)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?u(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?u(n.FINISH_SEND):a.push(n.FINISH_SEND)},start:function(n){(t=new WebSocket(r,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var r;e.debug&&o.debug("websocketRequest.onopen"),t.send((r="",n.forEach(function(e,t){r+=e+": "+t.join(", ")+"\r\n"}),s.encodeASCII(r))),a.forEach(function(e){u(e)})},t.onclose=function(t){e.debug&&o.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&o.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&o.debug("websocket.abort"),t.close()}}}(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var r=n.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&r.onHeaders(t.onHeaders),t.onMessage&&r.onMessage(t.onMessage),t.onEnd&&r.onEnd(t.onEnd),r.start(t.metadata),r.send(t.request),r.finishSend(),{close:function(){r.close()}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=function(e){var t=e.serializeBinary(),r=new ArrayBuffer(t.byteLength+5);return new DataView(r,1,4).setUint32(0,t.length,!1),new Uint8Array(r,5).set(t),new Uint8Array(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(2);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var r=null,s=null,i=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return i.onHeaders(function(e){r=e}),i.onMessage(function(e){s=e}),i.onEnd(function(e,o,i){t.onEnd({status:e,statusMessage:o,headers:r||new n.Metadata,message:s,trailers:i})}),i.start(t.metadata),i.send(t.request),i.finishSend(),{close:function(){i.close()}}}}])});

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var grpc_web_1 = __webpack_require__(/*! @improbable-eng/grpc-web */ "./node_modules/@improbable-eng/grpc-web/dist/grpc-web-client.umd.js");
var auth_pb_service_1 = __webpack_require__(/*! ../../../cmd/auth/grpc/auth_pb_service */ "../auth/grpc/auth_pb_service.js");
var account_pb_1 = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module '../../../pkg/account/dto/account_pb'"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));
function subscribe() {
    var sub = new account_pb_1.Subscribe();
    sub.setAlias("test_grpcweb");
    sub.setEmail("test_grpcweb@test.gg");
    sub.setPassword("password");
    grpc_web_1.grpc.unary(auth_pb_service_1.Auth.Subscribe, {
        request: sub,
        host: "https://localhost:8080",
        onEnd: function (res) {
            var status = res.status, statusMessage = res.statusMessage, headers = res.headers, message = res.message, trailers = res.trailers;
            console.log("subscribe.onEnd.status", status, statusMessage);
            console.log("subscribe.onEnd.headers", headers);
            if (status === grpc_web_1.grpc.Code.OK && message) {
                console.log("subscribe.onEnd.message", message.toObject());
            }
            console.log("subscribe.onEnd.trailers", trailers);
        }
    });
}
subscribe();


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL2F1dGgvZ3JwYy9hdXRoX3BiX3NlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BpbXByb2JhYmxlLWVuZy9ncnBjLXdlYi9kaXN0L2dycGMtd2ViLWNsaWVudC51bWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3REFBd0Qsa0JBQWtCO1FBQzFFO1FBQ0EsaURBQWlELGNBQWM7UUFDL0Q7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLHlDQUF5QyxpQ0FBaUM7UUFDMUUsZ0hBQWdILG1CQUFtQixFQUFFO1FBQ3JJO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMkJBQTJCLDBCQUEwQixFQUFFO1FBQ3ZELGlDQUFpQyxlQUFlO1FBQ2hEO1FBQ0E7UUFDQTs7UUFFQTtRQUNBLHNEQUFzRCwrREFBK0Q7O1FBRXJIO1FBQ0E7OztRQUdBO1FBQ0E7Ozs7Ozs7Ozs7OztBQ2xGQTtBQUNBOztBQUVBLGNBQWMsbUJBQU8sQ0FBQyxtSUFBVztBQUNqQywrQkFBK0IsbUJBQU8sQ0FBQyxrS0FBMEM7QUFDakYsbURBQW1ELG1CQUFPLENBQUMsd0tBQWdEO0FBQzNHLHFEQUFxRCxtQkFBTyxDQUFDLDBLQUFrRDtBQUMvRyxpREFBaUQsbUJBQU8sQ0FBQyxzS0FBOEM7QUFDdkcsMkRBQTJELG1CQUFPLENBQUMsZ0xBQXdEO0FBQzNILHFEQUFxRCxtQkFBTyxDQUFDLDBLQUFrRDtBQUMvRyxXQUFXLG1CQUFPLENBQUMsa0pBQTBCOztBQUU3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUJBQWlCLDJEQUEyRDtBQUM1RSxPQUFPO0FBQ1A7QUFDQSxpQkFBaUIsMkRBQTJEO0FBQzVFLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ2pXQSxlQUFlLEdBQUcsSUFBaUQsb0JBQW9CLEtBQUssYUFBaUksQ0FBQyxpQkFBaUIsbUJBQW1CLFNBQVMsY0FBYyw0QkFBNEIsWUFBWSxxQkFBcUIsMkRBQTJELHVDQUF1QyxxQ0FBcUMsb0JBQW9CLEVBQUUsaUJBQWlCLDRGQUE0RixlQUFlLHdDQUF3QyxTQUFTLEVBQUUsbUJBQW1CLDhCQUE4QixxREFBcUQsMEJBQTBCLDZDQUE2QyxzQkFBc0IsNkRBQTZELFlBQVksZUFBZSxTQUFTLGlCQUFpQixpQ0FBaUMsaUJBQWlCLFlBQVksVUFBVSxzQkFBc0IsbUJBQW1CLGlEQUFpRCxrQkFBa0Isa0JBQWtCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxXQUFXLDRCQUE0QixpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyxxQkFBcUIsaUJBQWlCLG1CQUFtQixzQkFBc0IscUVBQXFFLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsK0NBQStDLHVCQUF1QixtQkFBbUIsaUJBQWlCLGdCQUFnQix5UUFBeVEsOENBQThDLDRHQUE0RyxvTUFBb00scUdBQXFHLDhDQUE4QyxtSkFBbUosZUFBZSxLQUFLLDBIQUEwSCxXQUFXLG9EQUFvRCxzQ0FBc0MsOENBQThDLGdDQUFnQyw0RkFBNEYsa0NBQWtDLHlCQUF5QiwwQ0FBMEMsV0FBVyxzR0FBc0csS0FBSyxTQUFTLElBQUksdUJBQXVCLFNBQVMsd0lBQXdJLHNCQUFzQixzQ0FBc0MsZ0VBQWdFLGtCQUFrQiw0UEFBNFAsR0FBRyx1Q0FBdUMsNElBQTRJLHdDQUF3QywrQkFBK0IsYUFBYSw4RUFBOEUseUNBQXlDLGdHQUFnRyxLQUFLLCtHQUErRyx5RUFBeUUsNkxBQTZMLGtDQUFrQyx5Q0FBeUMsMENBQTBDLGVBQWUsSUFBSSw2QkFBNkIsU0FBUyxVQUFVLHNDQUFzQyxXQUFXLHVIQUF1SCxpQkFBaUIsU0FBUyxTQUFTLHNCQUFzQixRQUFRLEdBQUcsR0FBRyxzQ0FBc0Msd0dBQXdHLElBQUksS0FBSyxTQUFTLHNCQUFzQixRQUFRLEdBQUcsRUFBRSx3Q0FBd0MsV0FBVyxzSkFBc0osaUJBQWlCLFNBQVMsU0FBUyxzQkFBc0IsUUFBUSxHQUFHLEdBQUcsc0NBQXNDLFdBQVcsZ0lBQWdJLGlCQUFpQixLQUFLLFNBQVMsc0JBQXNCLFFBQVEsR0FBRyxFQUFFLG1DQUFtQyxnQ0FBZ0MsbUNBQW1DLGdDQUFnQywrQkFBK0IsNEJBQTRCLCtCQUErQiw0RUFBNEUsZ0JBQWdCLDBCQUEwQixFQUFFLG1HQUFtRyw4QkFBOEIsZ0dBQWdHLHlFQUF5RSw0RkFBNEYsd0pBQXdKLHlCQUF5Qix3QkFBd0IsOEJBQThCLG1DQUFtQyxzR0FBc0cseUVBQXlFLGtHQUFrRyxvREFBb0QsOEJBQThCLGlHQUFpRywwRUFBMEUsbUdBQW1HLEdBQUcsR0FBRyxjQUFjLCtCQUErQixrQkFBa0IsV0FBVyxzQkFBc0IsU0FBUyxZQUFZLGFBQWEsaUJBQWlCLE1BQU0sYUFBYSxtQkFBbUIsU0FBUyxjQUFjLDRCQUE0QixZQUFZLHFCQUFxQiwyREFBMkQsbUNBQW1DLFNBQVMscUJBQXFCLHFDQUFxQyxvQ0FBb0MsRUFBRSxpQkFBaUIsaUNBQWlDLGlCQUFpQixZQUFZLFVBQVUsc0JBQXNCLG1CQUFtQixpREFBaUQsaUJBQWlCLGtCQUFrQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsV0FBVyxpQkFBaUIsZ0JBQWdCLGlCQUFpQixrQkFBa0IsZUFBZSxFQUFFLGFBQWEscUJBQXFCLCtGQUErRiwyQ0FBMkMsOERBQThELEVBQUUsRUFBRSxtSEFBbUgsY0FBYyxFQUFFLG1EQUFtRCx3QkFBd0IsY0FBYyxFQUFFLHNIQUFzSCxXQUFXLHVDQUF1QyxjQUFjLGdCQUFnQixFQUFFLGdEQUFnRCw4QkFBOEIsV0FBVyxLQUFLLDRCQUE0QixRQUFRLHdEQUF3RCxtQkFBbUIsa0NBQWtDLHlCQUF5Qix3Q0FBd0MsS0FBSyx5QkFBeUIsTUFBTSxtQkFBbUIsOERBQThELGtDQUFrQyxnQ0FBZ0Msa0dBQWtHLDBDQUEwQywrQ0FBK0MsK0JBQStCLHlCQUF5QixxQkFBcUIsU0FBUyxzQkFBc0IsNEJBQTRCLHVCQUF1Qiw4Q0FBOEMsK0JBQStCLDBDQUEwQyw4QkFBOEIsZUFBZSwwQkFBMEIsdUJBQXVCLFNBQVMsNkJBQTZCLDBDQUEwQyxnQ0FBZ0MsaUNBQWlDLFdBQVcsZ0VBQWdFLHFCQUFxQixPQUFPLGtDQUFrQyxnQ0FBZ0Msa0JBQWtCLGtDQUFrQyxzQkFBc0IsY0FBYyxFQUFFLElBQUksZ0RBQWdELEdBQUcsR0FBRyxtQkFBbUIsaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxXQUFXLGtDQUFrQyxpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyxpQ0FBaUMsMENBQTBDLFFBQVEsMEJBQTBCLG9DQUFvQyw4QkFBOEIsUUFBUSx3QkFBd0IsaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxXQUFXLGNBQWMsU0FBUyw0QkFBNEIsd0lBQXdJLHVCQUF1Qiw4QkFBOEIsMENBQTBDLGlDQUFpQyxXQUFXLHFEQUFxRCxlQUFlLG1DQUFtQyw2QkFBNkIsZUFBZSxNQUFNLGlEQUFpRCwwQkFBMEIsb0NBQW9DLDBCQUEwQixpQ0FBaUMsV0FBVywwQkFBMEIsSUFBSSxnQ0FBZ0MsU0FBUyx5Q0FBeUMsaUNBQWlDLFVBQVUsRUFBRSxLQUFLLEdBQUcsZUFBZSxpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyxFQUFFLHlCQUF5QixvQ0FBb0MsbUJBQW1CLE1BQU0seUNBQXlDLElBQUksb0NBQW9DLGFBQWEsaUJBQWlCLGFBQWEsc0NBQXNDLFNBQVMsRUFBRSxrQkFBa0Isd0NBQXdDLDJCQUEyQixPQUFPLHVEQUF1RCx5Q0FBeUMsdUJBQXVCLGtDQUFrQyxHQUFHLGlCQUFpQixhQUFhLHNDQUFzQyxvQ0FBb0MsaUNBQWlDLElBQUksdUZBQXVGLFNBQVMseUJBQXlCLHNDQUFzQyxTQUFTLEVBQUUsa0JBQWtCLDJDQUEyQyxtQkFBbUIscUJBQXFCLHFEQUFxRCxRQUFRLGlCQUFpQixnQkFBZ0IsdUdBQXVHLHNDQUFzQyxXQUFXLGdJQUFnSSxvQ0FBb0MscUNBQXFDLDhDQUE4QyxvQkFBb0IsOEpBQThKLEVBQUUsOEJBQThCLFdBQVcsMkJBQTJCLFlBQVksc0dBQXNHLG9CQUFvQix5SEFBeUgsNkJBQTZCLG9CQUFvQiw4SkFBOEosRUFBRSxxQ0FBcUMsYUFBYSxvQ0FBb0MsK0JBQStCLGdCQUFnQiwrQkFBK0IscVNBQXFTLEdBQUcsR0FBRyxnQ0FBZ0MsMkdBQTJHLGlCQUFpQixhQUFhLCtDQUErQyxpQ0FBaUMsYUFBYSxnQ0FBZ0MsY0FBYyxnQkFBZ0IsZ0RBQWdELE9BQU8sZUFBZSxhQUFhLG1CQUFtQiw2RUFBNkUsRUFBRSxzQ0FBc0MsU0FBUyxFQUFFLDBCQUEwQiwyQkFBMkIsbUJBQW1CLDZDQUE2QywwREFBMEQsMkZBQTJGLGlCQUFpQixnQkFBZ0IsMkJBQTJCLDhDQUE4QyxxRkFBcUYsMkNBQTJDLG9DQUFvQyxXQUFXLHdCQUF3QixvQ0FBb0Msb0VBQW9FLHNDQUFzQyxxTkFBcU4scUNBQXFDLGlCQUFpQixvQ0FBb0MsK0JBQStCLFdBQVcsZ0JBQWdCLHlCQUF5QixtR0FBbUcsbUNBQW1DLDRSQUE0UixpRUFBaUUsRUFBRSxxQ0FBcUMsbUVBQW1FLDBCQUEwQiwrQkFBK0IsMERBQTBELEdBQUcsR0FBRyxRQUFRLGtCQUFrQixhQUFhLCtDQUErQyxrREFBa0Qsc0pBQXNKLHdDQUF3Qyx3QkFBd0Isa0hBQWtILEdBQUcsSUFBSSxnQkFBZ0Isc0JBQXNCLHVCQUF1Qix3QkFBd0Isc0RBQXNELFNBQVMsY0FBYywyQ0FBMkMsV0FBVyxLQUFLLDJEQUEyRCxhQUFhLFNBQVMscURBQXFELGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsMkJBQTJCLDhCQUE4QixjQUFjLDJCQUEyQixjQUFjLFlBQVksYUFBYSwyRUFBMkUsdUVBQXVFLGNBQWMsZ0NBQWdDLGNBQWMseUJBQXlCLGtCQUFrQix5QkFBeUIsa0JBQWtCLCtCQUErQixlQUFlLGtCQUFrQixzQ0FBc0MsSUFBSSxnQkFBZ0IsU0FBUywwQ0FBMEMsdUNBQXVDLGFBQWEsS0FBSyxzQkFBc0IsNERBQTRELE9BQU8sU0FBUyxhQUFhLG9EQUFvRCwrQkFBK0IsR0FBRyxpQkFBaUIsYUFBYSxpQ0FBaUMsdUNBQXVDLDRCQUE0QixXQUFXLG1EQUFtRCw2RUFBNkUsS0FBSywyR0FBMkcsV0FBVyx3QkFBd0IseUNBQXlDLE1BQU0sRUFBRSw0Q0FBNEMsNkdBQTZHLDhDQUE4Qyx1REFBdUQsMENBQTBDLHlEQUF5RCxJQUFJLFFBQVEsMkJBQTJCLEdBQUcsR0FBRyxHQUFHLGdCQUFnQixpQkFBaUIsYUFBYSxNQUFNLHNDQUFzQyxTQUFTLGNBQWMsa2tCQUFra0IscUJBQXFCLGtDQUFrQyxVQUFVLHlCQUF5QixxQkFBcUIsa0NBQWtDLGtDQUFrQyxtQ0FBbUMsMkJBQTJCLDBCQUEwQixxQ0FBcUMsb0NBQW9DLDJCQUEyQiwwQkFBMEIsZ0NBQWdDLDhCQUE4QixtQ0FBbUMsMkJBQTJCLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsNkVBQTZFLGFBQWEsa1RBQWtULHFCQUFxQixtQ0FBbUMsbUJBQW1CLEdBQUcsaUJBQWlCLGFBQWEsTUFBTSxhQUFhLHVCQUF1QixtQkFBbUIscUJBQXFCLElBQUksa0NBQWtDLFdBQVcsU0FBUyxjQUFjLFVBQVUsZUFBZSxJQUFJLDJDQUEyQyxVQUFVLFNBQVMsc0NBQXNDLFNBQVMsK0RBQStELHVFQUF1RSwrQ0FBK0MsdUdBQXVHLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsb0JBQW9CLGFBQWEsaUNBQWlDLFNBQVMsR0FBRywwQkFBMEIsZ0NBQWdDLG1CQUFtQixtQkFBbUIsdUNBQXVDLG9CQUFvQix5REFBeUQsdURBQXVELHNGQUFzRixhQUFhLGNBQWMsK0JBQStCLEtBQUssd0NBQXdDLGlEQUFpRCxPQUFPLHdCQUF3Qiw4Q0FBOEMsdUJBQXVCLHNFQUFzRSxtQkFBbUIsc0ZBQXNGLE1BQU0saUZBQWlGLDhCQUE4QiwyQ0FBMkMsS0FBSyxFQUFFLHVCQUF1Qix5REFBeUQsdUJBQXVCLCtDQUErQyx5QkFBeUIsbUNBQW1DLG1CQUFtQixnREFBZ0QsTUFBTSxpQkFBaUIsYUFBYSxzQ0FBc0MsU0FBUyxFQUFFLFdBQVcsdUJBQXVCLGlIQUFpSCxrQkFBa0IsZ0RBQWdELEVBQUUsbUtBQW1LLGlCQUFpQixhQUFhLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLDZCQUE2Qiw0REFBNEQsa0dBQWtHLGlCQUFpQixhQUFhLHNDQUFzQyxTQUFTLEVBQUUsa0JBQWtCLHNCQUFzQiw0SEFBNEgsZ0hBQWdILGdDQUFnQyxnREFBZ0QsRUFBRSwrQkFBK0IsSUFBSSwwQkFBMEIsSUFBSSwwQkFBMEIsU0FBUyx3RUFBd0UsRUFBRSx3REFBd0QsaUJBQWlCLGFBQWEsR0FBRyxFOzs7Ozs7Ozs7Ozs7OztBQ0FqbXdCLDRJQUE4QztBQUM5Qyw2SEFBNEQ7QUFDNUQsc01BQThEO0FBRTlELFNBQVMsU0FBUztJQUNoQixJQUFNLEdBQUcsR0FBRyxJQUFJLHNCQUFTLEVBQUUsQ0FBQztJQUM1QixHQUFHLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQztJQUM1QixHQUFHLENBQUMsUUFBUSxDQUFDLHNCQUFzQixDQUFDO0lBQ3BDLEdBQUcsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDO0lBQzNCLGVBQUksQ0FBQyxLQUFLLENBQUMsc0JBQUksQ0FBQyxTQUFTLEVBQUU7UUFDekIsT0FBTyxFQUFFLEdBQUc7UUFDWixJQUFJLEVBQUUsd0JBQXdCO1FBQzlCLEtBQUssRUFBRSxhQUFHO1lBQ0EsVUFBTSxHQUFnRCxHQUFHLE9BQW5ELEVBQUUsYUFBYSxHQUFpQyxHQUFHLGNBQXBDLEVBQUUsT0FBTyxHQUF3QixHQUFHLFFBQTNCLEVBQUUsT0FBTyxHQUFlLEdBQUcsUUFBbEIsRUFBRSxRQUFRLEdBQUssR0FBRyxTQUFSLENBQVM7WUFDbEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRSxNQUFNLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFDN0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNoRCxJQUFJLE1BQU0sS0FBSyxlQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxPQUFPLEVBQUU7Z0JBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMseUJBQXlCLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7YUFDNUQ7WUFDRCxPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBRXBELENBQUM7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsU0FBUyxFQUFFLENBQUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvaW5kZXgudHNcIik7XG4iLCIvLyBwYWNrYWdlOiBncnBjXG4vLyBmaWxlOiBhdXRoLnByb3RvXG5cbnZhciBhdXRoX3BiID0gcmVxdWlyZShcIi4vYXV0aF9wYlwiKTtcbnZhciBnb29nbGVfcHJvdG9idWZfZW1wdHlfcGIgPSByZXF1aXJlKFwiZ29vZ2xlLXByb3RvYnVmL2dvb2dsZS9wcm90b2J1Zi9lbXB0eV9wYlwiKTtcbnZhciBnaXRodWJfY29tX2Vsb2phaF9nYW1lXzAyX3BrZ19sb2JieV9sb2JieV9wYiA9IHJlcXVpcmUoXCIuL2dpdGh1Yi5jb20vZWxvamFoL2dhbWVfMDIvcGtnL2xvYmJ5L2xvYmJ5X3BiXCIpO1xudmFyIGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX3BsYXllcl9wbGF5ZXJfcGIgPSByZXF1aXJlKFwiLi9naXRodWIuY29tL2Vsb2phaC9nYW1lXzAyL3BrZy9wbGF5ZXIvcGxheWVyX3BiXCIpO1xudmFyIGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX3Jvb21fcm9vbV9wYiA9IHJlcXVpcmUoXCIuL2dpdGh1Yi5jb20vZWxvamFoL2dhbWVfMDIvcGtnL3Jvb20vcm9vbV9wYlwiKTtcbnZhciBnaXRodWJfY29tX2Vsb2phaF9nYW1lXzAyX3BrZ19hY2NvdW50X2R0b19hY2NvdW50X3BiID0gcmVxdWlyZShcIi4vZ2l0aHViLmNvbS9lbG9qYWgvZ2FtZV8wMi9wa2cvYWNjb3VudC9kdG8vYWNjb3VudF9wYlwiKTtcbnZhciBnaXRodWJfY29tX2Vsb2phaF9nYW1lXzAyX3BrZ19yb29tX2R0b19yb29tX3BiID0gcmVxdWlyZShcIi4vZ2l0aHViLmNvbS9lbG9qYWgvZ2FtZV8wMi9wa2cvcm9vbS9kdG8vcm9vbV9wYlwiKTtcbnZhciBncnBjID0gcmVxdWlyZShcIkBpbXByb2JhYmxlLWVuZy9ncnBjLXdlYlwiKS5ncnBjO1xuXG52YXIgQXV0aCA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEF1dGgoKSB7fVxuICBBdXRoLnNlcnZpY2VOYW1lID0gXCJncnBjLkF1dGhcIjtcbiAgcmV0dXJuIEF1dGg7XG59KCkpO1xuXG5BdXRoLlN1YnNjcmliZSA9IHtcbiAgbWV0aG9kTmFtZTogXCJTdWJzY3JpYmVcIixcbiAgc2VydmljZTogQXV0aCxcbiAgcmVxdWVzdFN0cmVhbTogZmFsc2UsXG4gIHJlc3BvbnNlU3RyZWFtOiBmYWxzZSxcbiAgcmVxdWVzdFR5cGU6IGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX2FjY291bnRfZHRvX2FjY291bnRfcGIuU3Vic2NyaWJlLFxuICByZXNwb25zZVR5cGU6IGdvb2dsZV9wcm90b2J1Zl9lbXB0eV9wYi5FbXB0eVxufTtcblxuQXV0aC5VbnN1YnNjcmliZSA9IHtcbiAgbWV0aG9kTmFtZTogXCJVbnN1YnNjcmliZVwiLFxuICBzZXJ2aWNlOiBBdXRoLFxuICByZXF1ZXN0U3RyZWFtOiBmYWxzZSxcbiAgcmVzcG9uc2VTdHJlYW06IGZhbHNlLFxuICByZXF1ZXN0VHlwZTogZ2l0aHViX2NvbV9lbG9qYWhfZ2FtZV8wMl9wa2dfYWNjb3VudF9kdG9fYWNjb3VudF9wYi5VbnN1YnNjcmliZSxcbiAgcmVzcG9uc2VUeXBlOiBnb29nbGVfcHJvdG9idWZfZW1wdHlfcGIuRW1wdHlcbn07XG5cbkF1dGguU2lnbmluID0ge1xuICBtZXRob2ROYW1lOiBcIlNpZ25pblwiLFxuICBzZXJ2aWNlOiBBdXRoLFxuICByZXF1ZXN0U3RyZWFtOiBmYWxzZSxcbiAgcmVzcG9uc2VTdHJlYW06IGZhbHNlLFxuICByZXF1ZXN0VHlwZTogZ2l0aHViX2NvbV9lbG9qYWhfZ2FtZV8wMl9wa2dfYWNjb3VudF9kdG9fYWNjb3VudF9wYi5TaWduaW4sXG4gIHJlc3BvbnNlVHlwZTogZ2l0aHViX2NvbV9lbG9qYWhfZ2FtZV8wMl9wa2dfYWNjb3VudF9kdG9fYWNjb3VudF9wYi5Ub2tlblxufTtcblxuQXV0aC5TaWdub3V0ID0ge1xuICBtZXRob2ROYW1lOiBcIlNpZ25vdXRcIixcbiAgc2VydmljZTogQXV0aCxcbiAgcmVxdWVzdFN0cmVhbTogZmFsc2UsXG4gIHJlc3BvbnNlU3RyZWFtOiBmYWxzZSxcbiAgcmVxdWVzdFR5cGU6IGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX2FjY291bnRfZHRvX2FjY291bnRfcGIuQXV0aCxcbiAgcmVzcG9uc2VUeXBlOiBnb29nbGVfcHJvdG9idWZfZW1wdHlfcGIuRW1wdHlcbn07XG5cbkF1dGguTGlzdExvYmJpZXMgPSB7XG4gIG1ldGhvZE5hbWU6IFwiTGlzdExvYmJpZXNcIixcbiAgc2VydmljZTogQXV0aCxcbiAgcmVxdWVzdFN0cmVhbTogZmFsc2UsXG4gIHJlc3BvbnNlU3RyZWFtOiB0cnVlLFxuICByZXF1ZXN0VHlwZTogZ2l0aHViX2NvbV9lbG9qYWhfZ2FtZV8wMl9wa2dfYWNjb3VudF9kdG9fYWNjb3VudF9wYi5BdXRoLFxuICByZXNwb25zZVR5cGU6IGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX2xvYmJ5X2xvYmJ5X3BiLkxcbn07XG5cbkF1dGguQ3JlYXRlUm9vbSA9IHtcbiAgbWV0aG9kTmFtZTogXCJDcmVhdGVSb29tXCIsXG4gIHNlcnZpY2U6IEF1dGgsXG4gIHJlcXVlc3RTdHJlYW06IGZhbHNlLFxuICByZXNwb25zZVN0cmVhbTogZmFsc2UsXG4gIHJlcXVlc3RUeXBlOiBnaXRodWJfY29tX2Vsb2phaF9nYW1lXzAyX3BrZ19yb29tX2R0b19yb29tX3BiLkNyZWF0ZSxcbiAgcmVzcG9uc2VUeXBlOiBnaXRodWJfY29tX2Vsb2phaF9nYW1lXzAyX3BrZ19yb29tX3Jvb21fcGIuUlxufTtcblxuQXV0aC5Db25uZWN0Um9vbSA9IHtcbiAgbWV0aG9kTmFtZTogXCJDb25uZWN0Um9vbVwiLFxuICBzZXJ2aWNlOiBBdXRoLFxuICByZXF1ZXN0U3RyZWFtOiBmYWxzZSxcbiAgcmVzcG9uc2VTdHJlYW06IGZhbHNlLFxuICByZXF1ZXN0VHlwZTogZ2l0aHViX2NvbV9lbG9qYWhfZ2FtZV8wMl9wa2dfcm9vbV9kdG9fcm9vbV9wYi5Db25uZWN0LFxuICByZXNwb25zZVR5cGU6IGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX3Jvb21fcm9vbV9wYi5SXG59O1xuXG5BdXRoLkNyZWF0ZVBsYXllciA9IHtcbiAgbWV0aG9kTmFtZTogXCJDcmVhdGVQbGF5ZXJcIixcbiAgc2VydmljZTogQXV0aCxcbiAgcmVxdWVzdFN0cmVhbTogZmFsc2UsXG4gIHJlc3BvbnNlU3RyZWFtOiBmYWxzZSxcbiAgcmVxdWVzdFR5cGU6IGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX3Jvb21fZHRvX3Jvb21fcGIuQ3JlYXRlLFxuICByZXNwb25zZVR5cGU6IGdpdGh1Yl9jb21fZWxvamFoX2dhbWVfMDJfcGtnX3BsYXllcl9wbGF5ZXJfcGIuUFxufTtcblxuZXhwb3J0cy5BdXRoID0gQXV0aDtcblxuZnVuY3Rpb24gQXV0aENsaWVudChzZXJ2aWNlSG9zdCwgb3B0aW9ucykge1xuICB0aGlzLnNlcnZpY2VIb3N0ID0gc2VydmljZUhvc3Q7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG59XG5cbkF1dGhDbGllbnQucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShyZXF1ZXN0TWVzc2FnZSwgbWV0YWRhdGEsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG4gIH1cbiAgdmFyIGNsaWVudCA9IGdycGMudW5hcnkoQXV0aC5TdWJzY3JpYmUsIHtcbiAgICByZXF1ZXN0OiByZXF1ZXN0TWVzc2FnZSxcbiAgICBob3N0OiB0aGlzLnNlcnZpY2VIb3N0LFxuICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICB0cmFuc3BvcnQ6IHRoaXMub3B0aW9ucy50cmFuc3BvcnQsXG4gICAgZGVidWc6IHRoaXMub3B0aW9ucy5kZWJ1ZyxcbiAgICBvbkVuZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gZ3JwYy5Db2RlLk9LKSB7XG4gICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNNZXNzYWdlKTtcbiAgICAgICAgICBlcnIuY29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgICBlcnIubWV0YWRhdGEgPSByZXNwb25zZS50cmFpbGVycztcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgIGNsaWVudC5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cbkF1dGhDbGllbnQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUocmVxdWVzdE1lc3NhZ2UsIG1ldGFkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICB9XG4gIHZhciBjbGllbnQgPSBncnBjLnVuYXJ5KEF1dGguVW5zdWJzY3JpYmUsIHtcbiAgICByZXF1ZXN0OiByZXF1ZXN0TWVzc2FnZSxcbiAgICBob3N0OiB0aGlzLnNlcnZpY2VIb3N0LFxuICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICB0cmFuc3BvcnQ6IHRoaXMub3B0aW9ucy50cmFuc3BvcnQsXG4gICAgZGVidWc6IHRoaXMub3B0aW9ucy5kZWJ1ZyxcbiAgICBvbkVuZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gZ3JwYy5Db2RlLk9LKSB7XG4gICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNNZXNzYWdlKTtcbiAgICAgICAgICBlcnIuY29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgICBlcnIubWV0YWRhdGEgPSByZXNwb25zZS50cmFpbGVycztcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgIGNsaWVudC5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cbkF1dGhDbGllbnQucHJvdG90eXBlLnNpZ25pbiA9IGZ1bmN0aW9uIHNpZ25pbihyZXF1ZXN0TWVzc2FnZSwgbWV0YWRhdGEsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG4gIH1cbiAgdmFyIGNsaWVudCA9IGdycGMudW5hcnkoQXV0aC5TaWduaW4sIHtcbiAgICByZXF1ZXN0OiByZXF1ZXN0TWVzc2FnZSxcbiAgICBob3N0OiB0aGlzLnNlcnZpY2VIb3N0LFxuICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICB0cmFuc3BvcnQ6IHRoaXMub3B0aW9ucy50cmFuc3BvcnQsXG4gICAgZGVidWc6IHRoaXMub3B0aW9ucy5kZWJ1ZyxcbiAgICBvbkVuZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gZ3JwYy5Db2RlLk9LKSB7XG4gICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNNZXNzYWdlKTtcbiAgICAgICAgICBlcnIuY29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgICBlcnIubWV0YWRhdGEgPSByZXNwb25zZS50cmFpbGVycztcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgIGNsaWVudC5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cbkF1dGhDbGllbnQucHJvdG90eXBlLnNpZ25vdXQgPSBmdW5jdGlvbiBzaWdub3V0KHJlcXVlc3RNZXNzYWdlLCBtZXRhZGF0YSwgY2FsbGJhY2spIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1sxXTtcbiAgfVxuICB2YXIgY2xpZW50ID0gZ3JwYy51bmFyeShBdXRoLlNpZ25vdXQsIHtcbiAgICByZXF1ZXN0OiByZXF1ZXN0TWVzc2FnZSxcbiAgICBob3N0OiB0aGlzLnNlcnZpY2VIb3N0LFxuICAgIG1ldGFkYXRhOiBtZXRhZGF0YSxcbiAgICB0cmFuc3BvcnQ6IHRoaXMub3B0aW9ucy50cmFuc3BvcnQsXG4gICAgZGVidWc6IHRoaXMub3B0aW9ucy5kZWJ1ZyxcbiAgICBvbkVuZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gZ3JwYy5Db2RlLk9LKSB7XG4gICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNNZXNzYWdlKTtcbiAgICAgICAgICBlcnIuY29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgICBlcnIubWV0YWRhdGEgPSByZXNwb25zZS50cmFpbGVycztcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICAgIGNsaWVudC5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cbkF1dGhDbGllbnQucHJvdG90eXBlLmxpc3RMb2JiaWVzID0gZnVuY3Rpb24gbGlzdExvYmJpZXMocmVxdWVzdE1lc3NhZ2UsIG1ldGFkYXRhKSB7XG4gIHZhciBsaXN0ZW5lcnMgPSB7XG4gICAgZGF0YTogW10sXG4gICAgZW5kOiBbXSxcbiAgICBzdGF0dXM6IFtdXG4gIH07XG4gIHZhciBjbGllbnQgPSBncnBjLmludm9rZShBdXRoLkxpc3RMb2JiaWVzLCB7XG4gICAgcmVxdWVzdDogcmVxdWVzdE1lc3NhZ2UsXG4gICAgaG9zdDogdGhpcy5zZXJ2aWNlSG9zdCxcbiAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgdHJhbnNwb3J0OiB0aGlzLm9wdGlvbnMudHJhbnNwb3J0LFxuICAgIGRlYnVnOiB0aGlzLm9wdGlvbnMuZGVidWcsXG4gICAgb25NZXNzYWdlOiBmdW5jdGlvbiAocmVzcG9uc2VNZXNzYWdlKSB7XG4gICAgICBsaXN0ZW5lcnMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIGhhbmRsZXIocmVzcG9uc2VNZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25FbmQ6IGZ1bmN0aW9uIChzdGF0dXMsIHN0YXR1c01lc3NhZ2UsIHRyYWlsZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMuc3RhdHVzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgaGFuZGxlcih7IGNvZGU6IHN0YXR1cywgZGV0YWlsczogc3RhdHVzTWVzc2FnZSwgbWV0YWRhdGE6IHRyYWlsZXJzIH0pO1xuICAgICAgfSk7XG4gICAgICBsaXN0ZW5lcnMuZW5kLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgaGFuZGxlcih7IGNvZGU6IHN0YXR1cywgZGV0YWlsczogc3RhdHVzTWVzc2FnZSwgbWV0YWRhdGE6IHRyYWlsZXJzIH0pO1xuICAgICAgfSk7XG4gICAgICBsaXN0ZW5lcnMgPSBudWxsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgb246IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyKSB7XG4gICAgICBsaXN0ZW5lcnNbdHlwZV0ucHVzaChoYW5kbGVyKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgY2FuY2VsOiBmdW5jdGlvbiAoKSB7XG4gICAgICBsaXN0ZW5lcnMgPSBudWxsO1xuICAgICAgY2xpZW50LmNsb3NlKCk7XG4gICAgfVxuICB9O1xufTtcblxuQXV0aENsaWVudC5wcm90b3R5cGUuY3JlYXRlUm9vbSA9IGZ1bmN0aW9uIGNyZWF0ZVJvb20ocmVxdWVzdE1lc3NhZ2UsIG1ldGFkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICB9XG4gIHZhciBjbGllbnQgPSBncnBjLnVuYXJ5KEF1dGguQ3JlYXRlUm9vbSwge1xuICAgIHJlcXVlc3Q6IHJlcXVlc3RNZXNzYWdlLFxuICAgIGhvc3Q6IHRoaXMuc2VydmljZUhvc3QsXG4gICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgIHRyYW5zcG9ydDogdGhpcy5vcHRpb25zLnRyYW5zcG9ydCxcbiAgICBkZWJ1ZzogdGhpcy5vcHRpb25zLmRlYnVnLFxuICAgIG9uRW5kOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSBncnBjLkNvZGUuT0spIHtcbiAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c01lc3NhZ2UpO1xuICAgICAgICAgIGVyci5jb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIGVyci5tZXRhZGF0YSA9IHJlc3BvbnNlLnRyYWlsZXJzO1xuICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgY2xpZW50LmNsb3NlKCk7XG4gICAgfVxuICB9O1xufTtcblxuQXV0aENsaWVudC5wcm90b3R5cGUuY29ubmVjdFJvb20gPSBmdW5jdGlvbiBjb25uZWN0Um9vbShyZXF1ZXN0TWVzc2FnZSwgbWV0YWRhdGEsIGNhbGxiYWNrKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG4gIH1cbiAgdmFyIGNsaWVudCA9IGdycGMudW5hcnkoQXV0aC5Db25uZWN0Um9vbSwge1xuICAgIHJlcXVlc3Q6IHJlcXVlc3RNZXNzYWdlLFxuICAgIGhvc3Q6IHRoaXMuc2VydmljZUhvc3QsXG4gICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgIHRyYW5zcG9ydDogdGhpcy5vcHRpb25zLnRyYW5zcG9ydCxcbiAgICBkZWJ1ZzogdGhpcy5vcHRpb25zLmRlYnVnLFxuICAgIG9uRW5kOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSBncnBjLkNvZGUuT0spIHtcbiAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c01lc3NhZ2UpO1xuICAgICAgICAgIGVyci5jb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIGVyci5tZXRhZGF0YSA9IHJlc3BvbnNlLnRyYWlsZXJzO1xuICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgY2xpZW50LmNsb3NlKCk7XG4gICAgfVxuICB9O1xufTtcblxuQXV0aENsaWVudC5wcm90b3R5cGUuY3JlYXRlUGxheWVyID0gZnVuY3Rpb24gY3JlYXRlUGxheWVyKHJlcXVlc3RNZXNzYWdlLCBtZXRhZGF0YSwgY2FsbGJhY2spIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1sxXTtcbiAgfVxuICB2YXIgY2xpZW50ID0gZ3JwYy51bmFyeShBdXRoLkNyZWF0ZVBsYXllciwge1xuICAgIHJlcXVlc3Q6IHJlcXVlc3RNZXNzYWdlLFxuICAgIGhvc3Q6IHRoaXMuc2VydmljZUhvc3QsXG4gICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgIHRyYW5zcG9ydDogdGhpcy5vcHRpb25zLnRyYW5zcG9ydCxcbiAgICBkZWJ1ZzogdGhpcy5vcHRpb25zLmRlYnVnLFxuICAgIG9uRW5kOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSBncnBjLkNvZGUuT0spIHtcbiAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c01lc3NhZ2UpO1xuICAgICAgICAgIGVyci5jb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIGVyci5tZXRhZGF0YSA9IHJlc3BvbnNlLnRyYWlsZXJzO1xuICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNhbmNlbDogZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgY2xpZW50LmNsb3NlKCk7XG4gICAgfVxuICB9O1xufTtcblxuZXhwb3J0cy5BdXRoQ2xpZW50ID0gQXV0aENsaWVudDtcblxuIiwiIWZ1bmN0aW9uKGUsdCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9dCgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSx0KTtlbHNle3ZhciByPXQoKTtmb3IodmFyIG4gaW4gcikoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czplKVtuXT1yW25dfX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD17fTtmdW5jdGlvbiByKG4pe2lmKHRbbl0pcmV0dXJuIHRbbl0uZXhwb3J0czt2YXIgbz10W25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtuXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxyKSxvLmw9ITAsby5leHBvcnRzfXJldHVybiByLm09ZSxyLmM9dCxyLmQ9ZnVuY3Rpb24oZSx0LG4pe3IubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGdldDpufSl9LHIucj1mdW5jdGlvbihlKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxyLnQ9ZnVuY3Rpb24oZSx0KXtpZigxJnQmJihlPXIoZSkpLDgmdClyZXR1cm4gZTtpZig0JnQmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6ZX0pLDImdCYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpZm9yKHZhciBvIGluIGUpci5kKG4sbyxmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0uYmluZChudWxsLG8pKTtyZXR1cm4gbn0sci5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiByLmQodCxcImFcIix0KSx0fSxyLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHIucD1cIlwiLHIoci5zPTEwKX0oW2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpO3QuTWV0YWRhdGE9bi5Ccm93c2VySGVhZGVyc30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZGVidWc9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0XT1hcmd1bWVudHNbdF07Y29uc29sZS5kZWJ1Zz9jb25zb2xlLmRlYnVnLmFwcGx5KG51bGwsZSk6Y29uc29sZS5sb2cuYXBwbHkobnVsbCxlKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApLG89cig4KSxzPXIoOSksaT1yKDEpLGE9cig0KSx1PXIoMTQpO3QuY2xpZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBkKGUsdCl9O3ZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuc3RhcnRlZD0hMSx0aGlzLnNlbnRGaXJzdE1lc3NhZ2U9ITEsdGhpcy5jb21wbGV0ZWQ9ITEsdGhpcy5jbG9zZWQ9ITEsdGhpcy5maW5pc2hlZFNlbmRpbmc9ITEsdGhpcy5vbkhlYWRlcnNDYWxsYmFja3M9W10sdGhpcy5vbk1lc3NhZ2VDYWxsYmFja3M9W10sdGhpcy5vbkVuZENhbGxiYWNrcz1bXSx0aGlzLnBhcnNlcj1uZXcgby5DaHVua1BhcnNlcix0aGlzLm1ldGhvZERlZmluaXRpb249ZSx0aGlzLnByb3BzPXQsdGhpcy5jcmVhdGVUcmFuc3BvcnQoKX1yZXR1cm4gZS5wcm90b3R5cGUuY3JlYXRlVHJhbnNwb3J0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy5ob3N0K1wiL1wiK3RoaXMubWV0aG9kRGVmaW5pdGlvbi5zZXJ2aWNlLnNlcnZpY2VOYW1lK1wiL1wiK3RoaXMubWV0aG9kRGVmaW5pdGlvbi5tZXRob2ROYW1lLHQ9e21ldGhvZERlZmluaXRpb246dGhpcy5tZXRob2REZWZpbml0aW9uLGRlYnVnOnRoaXMucHJvcHMuZGVidWd8fCExLHVybDplLG9uSGVhZGVyczp0aGlzLm9uVHJhbnNwb3J0SGVhZGVycy5iaW5kKHRoaXMpLG9uQ2h1bms6dGhpcy5vblRyYW5zcG9ydENodW5rLmJpbmQodGhpcyksb25FbmQ6dGhpcy5vblRyYW5zcG9ydEVuZC5iaW5kKHRoaXMpfTt0aGlzLnByb3BzLnRyYW5zcG9ydD90aGlzLnRyYW5zcG9ydD10aGlzLnByb3BzLnRyYW5zcG9ydCh0KTp0aGlzLnRyYW5zcG9ydD1hLm1ha2VEZWZhdWx0VHJhbnNwb3J0KHQpfSxlLnByb3RvdHlwZS5vblRyYW5zcG9ydEhlYWRlcnM9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnByb3BzLmRlYnVnJiZpLmRlYnVnKFwib25IZWFkZXJzXCIsZSx0KSx0aGlzLmNsb3NlZCl0aGlzLnByb3BzLmRlYnVnJiZpLmRlYnVnKFwiZ3JwYy5vbkhlYWRlcnMgcmVjZWl2ZWQgYWZ0ZXIgcmVxdWVzdCB3YXMgY2xvc2VkIC0gaWdub3JpbmdcIik7ZWxzZSBpZigwPT09dCk7ZWxzZXt0aGlzLnJlc3BvbnNlSGVhZGVycz1lLHRoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJvbkhlYWRlcnMucmVzcG9uc2VIZWFkZXJzXCIsSlNPTi5zdHJpbmdpZnkodGhpcy5yZXNwb25zZUhlYWRlcnMsbnVsbCwyKSk7dmFyIHI9YyhlKTt0aGlzLnByb3BzLmRlYnVnJiZpLmRlYnVnKFwib25IZWFkZXJzLmdSUENTdGF0dXNcIixyKTt2YXIgbj1yJiZyPj0wP3I6cy5odHRwU3RhdHVzVG9Db2RlKHQpO3RoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJvbkhlYWRlcnMuY29kZVwiLG4pO3ZhciBvPWUuZ2V0KFwiZ3JwYy1tZXNzYWdlXCIpfHxbXTtpZih0aGlzLnByb3BzLmRlYnVnJiZpLmRlYnVnKFwib25IZWFkZXJzLmdSUENNZXNzYWdlXCIsbyksdGhpcy5yYXdPbkhlYWRlcnMoZSksbiE9PXMuQ29kZS5PSyl7dmFyIGE9dGhpcy5kZWNvZGVHUlBDU3RhdHVzKG9bMF0pO3RoaXMucmF3T25FcnJvcihuLGEsZSl9fX0sZS5wcm90b3R5cGUub25UcmFuc3BvcnRDaHVuaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuY2xvc2VkKXRoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJncnBjLm9uQ2h1bmsgcmVjZWl2ZWQgYWZ0ZXIgcmVxdWVzdCB3YXMgY2xvc2VkIC0gaWdub3JpbmdcIik7ZWxzZXt2YXIgcj1bXTt0cnl7cj10aGlzLnBhcnNlci5wYXJzZShlKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5wcm9wcy5kZWJ1ZyYmaS5kZWJ1ZyhcIm9uQ2h1bmsucGFyc2luZyBlcnJvclwiLGUsZS5tZXNzYWdlKSx2b2lkIHRoaXMucmF3T25FcnJvcihzLkNvZGUuSW50ZXJuYWwsXCJwYXJzaW5nIGVycm9yOiBcIitlLm1lc3NhZ2UpfXIuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlLmNodW5rVHlwZT09PW8uQ2h1bmtUeXBlLk1FU1NBR0Upe3ZhciByPXQubWV0aG9kRGVmaW5pdGlvbi5yZXNwb25zZVR5cGUuZGVzZXJpYWxpemVCaW5hcnkoZS5kYXRhKTt0LnJhd09uTWVzc2FnZShyKX1lbHNlIGUuY2h1bmtUeXBlPT09by5DaHVua1R5cGUuVFJBSUxFUlMmJih0LnJlc3BvbnNlSGVhZGVycz8odC5yZXNwb25zZVRyYWlsZXJzPW5ldyBuLk1ldGFkYXRhKGUudHJhaWxlcnMpLHQucHJvcHMuZGVidWcmJmkuZGVidWcoXCJvbkNodW5rLnRyYWlsZXJzXCIsdC5yZXNwb25zZVRyYWlsZXJzKSk6KHQucmVzcG9uc2VIZWFkZXJzPW5ldyBuLk1ldGFkYXRhKGUudHJhaWxlcnMpLHQucmF3T25IZWFkZXJzKHQucmVzcG9uc2VIZWFkZXJzKSkpfSl9fSxlLnByb3RvdHlwZS5vblRyYW5zcG9ydEVuZD1mdW5jdGlvbigpe2lmKHRoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJncnBjLm9uRW5kXCIpLHRoaXMuY2xvc2VkKXRoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJncnBjLm9uRW5kIHJlY2VpdmVkIGFmdGVyIHJlcXVlc3Qgd2FzIGNsb3NlZCAtIGlnbm9yaW5nXCIpO2Vsc2UgaWYodm9pZCAwIT09dGhpcy5yZXNwb25zZVRyYWlsZXJzKXt2YXIgZT1jKHRoaXMucmVzcG9uc2VUcmFpbGVycyk7aWYobnVsbCE9PWUpe3ZhciB0PXRoaXMucmVzcG9uc2VUcmFpbGVycy5nZXQoXCJncnBjLW1lc3NhZ2VcIikscj10aGlzLmRlY29kZUdSUENTdGF0dXModFswXSk7dGhpcy5yYXdPbkVuZChlLHIsdGhpcy5yZXNwb25zZVRyYWlsZXJzKX1lbHNlIHRoaXMucmF3T25FcnJvcihzLkNvZGUuSW50ZXJuYWwsXCJSZXNwb25zZSBjbG9zZWQgd2l0aG91dCBncnBjLXN0YXR1cyAoVHJhaWxlcnMgcHJvdmlkZWQpXCIpfWVsc2V7aWYodm9pZCAwPT09dGhpcy5yZXNwb25zZUhlYWRlcnMpcmV0dXJuIHZvaWQgdGhpcy5yYXdPbkVycm9yKHMuQ29kZS5Vbmtub3duLFwiUmVzcG9uc2UgY2xvc2VkIHdpdGhvdXQgaGVhZGVyc1wiKTt2YXIgbj1jKHRoaXMucmVzcG9uc2VIZWFkZXJzKSxvPXRoaXMucmVzcG9uc2VIZWFkZXJzLmdldChcImdycGMtbWVzc2FnZVwiKTtpZih0aGlzLnByb3BzLmRlYnVnJiZpLmRlYnVnKFwiZ3JwYy5oZWFkZXJzIG9ubHkgcmVzcG9uc2UgXCIsbixvKSxudWxsPT09bilyZXR1cm4gdm9pZCB0aGlzLnJhd09uRW5kKHMuQ29kZS5Vbmtub3duLFwiUmVzcG9uc2UgY2xvc2VkIHdpdGhvdXQgZ3JwYy1zdGF0dXMgKEhlYWRlcnMgb25seSlcIix0aGlzLnJlc3BvbnNlSGVhZGVycyk7dmFyIGE9dGhpcy5kZWNvZGVHUlBDU3RhdHVzKG9bMF0pO3RoaXMucmF3T25FbmQobixhLHRoaXMucmVzcG9uc2VIZWFkZXJzKX19LGUucHJvdG90eXBlLmRlY29kZUdSUENTdGF0dXM9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuXCJcIjt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlKX1jYXRjaCh0KXtyZXR1cm4gZX19LGUucHJvdG90eXBlLnJhd09uRW5kPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3RoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJyYXdPbkVuZFwiLGUsdCxyKSx0aGlzLmNvbXBsZXRlZHx8KHRoaXMuY29tcGxldGVkPSEwLHRoaXMub25FbmRDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihvKXtpZighbi5jbG9zZWQpdHJ5e28oZSx0LHIpfWNhdGNoKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9fSkpfSxlLnByb3RvdHlwZS5yYXdPbkhlYWRlcnM9ZnVuY3Rpb24oZSl7dGhpcy5wcm9wcy5kZWJ1ZyYmaS5kZWJ1ZyhcInJhd09uSGVhZGVyc1wiLGUpLHRoaXMuY29tcGxldGVkfHx0aGlzLm9uSGVhZGVyc0NhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RyeXt0KGUpfWNhdGNoKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9fSl9LGUucHJvdG90eXBlLnJhd09uRXJyb3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPXRoaXM7dm9pZCAwPT09ciYmKHI9bmV3IG4uTWV0YWRhdGEpLHRoaXMucHJvcHMuZGVidWcmJmkuZGVidWcoXCJyYXdPbkVycm9yXCIsZSx0KSx0aGlzLmNvbXBsZXRlZHx8KHRoaXMuY29tcGxldGVkPSEwLHRoaXMub25FbmRDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihuKXtpZighby5jbG9zZWQpdHJ5e24oZSx0LHIpfWNhdGNoKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9fSkpfSxlLnByb3RvdHlwZS5yYXdPbk1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLnByb3BzLmRlYnVnJiZpLmRlYnVnKFwicmF3T25NZXNzYWdlXCIsZS50b09iamVjdCgpKSx0aGlzLmNvbXBsZXRlZHx8dGhpcy5jbG9zZWR8fHRoaXMub25NZXNzYWdlQ2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24ocil7aWYoIXQuY2xvc2VkKXRyeXtyKGUpfWNhdGNoKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9fSl9LGUucHJvdG90eXBlLm9uSGVhZGVycz1mdW5jdGlvbihlKXt0aGlzLm9uSGVhZGVyc0NhbGxiYWNrcy5wdXNoKGUpfSxlLnByb3RvdHlwZS5vbk1lc3NhZ2U9ZnVuY3Rpb24oZSl7dGhpcy5vbk1lc3NhZ2VDYWxsYmFja3MucHVzaChlKX0sZS5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oZSl7dGhpcy5vbkVuZENhbGxiYWNrcy5wdXNoKGUpfSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXtpZih0aGlzLnN0YXJ0ZWQpdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IGFscmVhZHkgc3RhcnRlZCAtIGNhbm5vdCAuc3RhcnQoKVwiKTt0aGlzLnN0YXJ0ZWQ9ITA7dmFyIHQ9bmV3IG4uTWV0YWRhdGEoZXx8e30pO3Quc2V0KFwiY29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi9ncnBjLXdlYitwcm90b1wiKSx0LnNldChcIngtZ3JwYy13ZWJcIixcIjFcIiksdGhpcy50cmFuc3BvcnQuc3RhcnQodCl9LGUucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuc3RhcnRlZCl0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgbm90IHN0YXJ0ZWQgLSAuc3RhcnQoKSBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgLnNlbmQoKVwiKTtpZih0aGlzLmNsb3NlZCl0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgYWxyZWFkeSBjbG9zZWQgLSBjYW5ub3QgLnNlbmQoKVwiKTtpZih0aGlzLmZpbmlzaGVkU2VuZGluZyl0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgYWxyZWFkeSBmaW5pc2hlZCBzZW5kaW5nIC0gY2Fubm90IC5zZW5kKClcIik7aWYoIXRoaXMubWV0aG9kRGVmaW5pdGlvbi5yZXF1ZXN0U3RyZWFtJiZ0aGlzLnNlbnRGaXJzdE1lc3NhZ2UpdGhyb3cgbmV3IEVycm9yKFwiTWVzc2FnZSBhbHJlYWR5IHNlbnQgZm9yIG5vbi1jbGllbnQtc3RyZWFtaW5nIG1ldGhvZCAtIGNhbm5vdCAuc2VuZCgpXCIpO3RoaXMuc2VudEZpcnN0TWVzc2FnZT0hMDt2YXIgdD11LmZyYW1lUmVxdWVzdChlKTt0aGlzLnRyYW5zcG9ydC5zZW5kTWVzc2FnZSh0KX0sZS5wcm90b3R5cGUuZmluaXNoU2VuZD1mdW5jdGlvbigpe2lmKCF0aGlzLnN0YXJ0ZWQpdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IG5vdCBzdGFydGVkIC0gLmZpbmlzaFNlbmQoKSBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgLmNsb3NlKClcIik7aWYodGhpcy5jbG9zZWQpdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IGFscmVhZHkgY2xvc2VkIC0gY2Fubm90IC5zZW5kKClcIik7aWYodGhpcy5maW5pc2hlZFNlbmRpbmcpdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IGFscmVhZHkgZmluaXNoZWQgc2VuZGluZyAtIGNhbm5vdCAuZmluaXNoU2VuZCgpXCIpO3RoaXMuZmluaXNoZWRTZW5kaW5nPSEwLHRoaXMudHJhbnNwb3J0LmZpbmlzaFNlbmQoKX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtpZighdGhpcy5zdGFydGVkKXRocm93IG5ldyBFcnJvcihcIkNsaWVudCBub3Qgc3RhcnRlZCAtIC5zdGFydCgpIG11c3QgYmUgY2FsbGVkIGJlZm9yZSAuY2xvc2UoKVwiKTtpZih0aGlzLmNsb3NlZCl0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgYWxyZWFkeSBjbG9zZWQgLSBjYW5ub3QgLmNsb3NlKClcIik7dGhpcy5jbG9zZWQ9ITAsdGhpcy5wcm9wcy5kZWJ1ZyYmaS5kZWJ1ZyhcInJlcXVlc3QuYWJvcnQgYWJvcnRpbmcgcmVxdWVzdFwiKSx0aGlzLnRyYW5zcG9ydC5jYW5jZWwoKX0sZX0oKTtmdW5jdGlvbiBjKGUpe3ZhciB0PWUuZ2V0KFwiZ3JwYy1zdGF0dXNcIil8fFtdO2lmKHQubGVuZ3RoPjApdHJ5e3ZhciByPXRbMF07cmV0dXJuIHBhcnNlSW50KHIsMTApfWNhdGNoKGUpe3JldHVybiBudWxsfXJldHVybiBudWxsfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuO249ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9e307ZnVuY3Rpb24gcihuKXtpZih0W25dKXJldHVybiB0W25dLmV4cG9ydHM7dmFyIG89dFtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsciksby5sPSEwLG8uZXhwb3J0c31yZXR1cm4gci5tPWUsci5jPXQsci5pPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxyLmQ9ZnVuY3Rpb24oZSx0LG4pe3IubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6bn0pfSxyLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHIuZCh0LFwiYVwiLHQpLHR9LHIubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sci5wPVwiXCIscihyLnM9MSl9KFtmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2b2lkIDA9PT1lJiYoZT17fSksdm9pZCAwPT09dCYmKHQ9e3NwbGl0VmFsdWVzOiExfSk7dmFyIHIsbz10aGlzO2lmKHRoaXMuaGVhZGVyc01hcD17fSxlKWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBIZWFkZXJzJiZlIGluc3RhbmNlb2YgSGVhZGVycyluLmdldEhlYWRlcktleXMoZSkuZm9yRWFjaChmdW5jdGlvbihyKXtuLmdldEhlYWRlclZhbHVlcyhlLHIpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5zcGxpdFZhbHVlcz9vLmFwcGVuZChyLG4uc3BsaXRIZWFkZXJWYWx1ZShlKSk6by5hcHBlbmQocixlKX0pfSk7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2Yocj1lKSYmXCJvYmplY3RcIj09dHlwZW9mIHIuaGVhZGVyc01hcCYmXCJmdW5jdGlvblwiPT10eXBlb2Ygci5mb3JFYWNoKWUuZm9yRWFjaChmdW5jdGlvbihlLHQpe28uYXBwZW5kKGUsdCl9KTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAmJmUgaW5zdGFuY2VvZiBNYXApe2UuZm9yRWFjaChmdW5jdGlvbihlLHQpe28uYXBwZW5kKHQsZSl9KX1lbHNlXCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5hcHBlbmRGcm9tU3RyaW5nKGUpOlwib2JqZWN0XCI9PXR5cGVvZiBlJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPWVbdF07QXJyYXkuaXNBcnJheShyKT9yLmZvckVhY2goZnVuY3Rpb24oZSl7by5hcHBlbmQodCxlKX0pOm8uYXBwZW5kKHQscil9KX1yZXR1cm4gZS5wcm90b3R5cGUuYXBwZW5kRnJvbVN0cmluZz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5zcGxpdChcIlxcclxcblwiKSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl0sbz1uLmluZGV4T2YoXCI6XCIpO2lmKG8+MCl7dmFyIHM9bi5zdWJzdHJpbmcoMCxvKS50cmltKCksaT1uLnN1YnN0cmluZyhvKzEpLnRyaW0oKTt0aGlzLmFwcGVuZChzLGkpfX19LGUucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlLHQpe3ZhciByPW4ubm9ybWFsaXplTmFtZShlKTtpZih2b2lkIDA9PT10KWRlbGV0ZSB0aGlzLmhlYWRlcnNNYXBbcl07ZWxzZXt2YXIgbz10aGlzLmhlYWRlcnNNYXBbcl07aWYobyl7dmFyIHM9by5pbmRleE9mKHQpO3M+PTAmJm8uc3BsaWNlKHMsMSksMD09PW8ubGVuZ3RoJiZkZWxldGUgdGhpcy5oZWFkZXJzTWFwW3JdfX19LGUucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbz1uLm5vcm1hbGl6ZU5hbWUoZSk7QXJyYXkuaXNBcnJheSh0aGlzLmhlYWRlcnNNYXBbb10pfHwodGhpcy5oZWFkZXJzTWFwW29dPVtdKSxBcnJheS5pc0FycmF5KHQpP3QuZm9yRWFjaChmdW5jdGlvbihlKXtyLmhlYWRlcnNNYXBbb10ucHVzaChuLm5vcm1hbGl6ZVZhbHVlKGUpKX0pOnRoaXMuaGVhZGVyc01hcFtvXS5wdXNoKG4ubm9ybWFsaXplVmFsdWUodCkpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uLm5vcm1hbGl6ZU5hbWUoZSk7aWYoQXJyYXkuaXNBcnJheSh0KSl7dmFyIG89W107dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe28ucHVzaChuLm5vcm1hbGl6ZVZhbHVlKGUpKX0pLHRoaXMuaGVhZGVyc01hcFtyXT1vfWVsc2UgdGhpcy5oZWFkZXJzTWFwW3JdPVtuLm5vcm1hbGl6ZVZhbHVlKHQpXX0sZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5oZWFkZXJzTWFwW24ubm9ybWFsaXplTmFtZShlKV07aWYoIUFycmF5LmlzQXJyYXkocikpcmV0dXJuITE7aWYodm9pZCAwIT09dCl7dmFyIG89bi5ub3JtYWxpemVWYWx1ZSh0KTtyZXR1cm4gci5pbmRleE9mKG8pPj0wfXJldHVybiEwfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5oZWFkZXJzTWFwW24ubm9ybWFsaXplTmFtZShlKV07cmV0dXJuIHZvaWQgMCE9PXQ/dC5jb25jYXQoKTpbXX0sZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMuaGVhZGVyc01hcCkuZm9yRWFjaChmdW5jdGlvbihyKXtlKHIsdC5oZWFkZXJzTWFwW3JdKX0sdGhpcyl9LGUucHJvdG90eXBlLnRvSGVhZGVycz1mdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBIZWFkZXJzKXt2YXIgZT1uZXcgSGVhZGVycztyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ci5mb3JFYWNoKGZ1bmN0aW9uKHIpe2UuYXBwZW5kKHQscil9KX0pLGV9dGhyb3cgbmV3IEVycm9yKFwiSGVhZGVycyBjbGFzcyBpcyBub3QgZGVmaW5lZFwiKX0sZX0oKTt0LkJyb3dzZXJIZWFkZXJzPW99LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDApO3QuQnJvd3NlckhlYWRlcnM9bi5Ccm93c2VySGVhZGVyc30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuaXRlcmF0ZUhlYWRlcnM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZVtTeW1ib2wuaXRlcmF0b3JdKCksbj1yLm5leHQoKTshbi5kb25lOyl0KG4udmFsdWVbMF0pLG49ci5uZXh0KCl9LHQuaXRlcmF0ZUhlYWRlcnNLZXlzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUua2V5cygpLG49ci5uZXh0KCk7IW4uZG9uZTspdChuLnZhbHVlKSxuPXIubmV4dCgpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMik7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZX10Lm5vcm1hbGl6ZU5hbWU9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihlPVN0cmluZyhlKSksL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lXCIpO3JldHVybiBlLnRvTG93ZXJDYXNlKCl9LHQubm9ybWFsaXplVmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGUmJihlPVN0cmluZyhlKSksZX0sdC5nZXRIZWFkZXJWYWx1ZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1vKGUpO2lmKHIgaW5zdGFuY2VvZiBIZWFkZXJzJiZyLmdldEFsbClyZXR1cm4gci5nZXRBbGwodCk7dmFyIG49ci5nZXQodCk7cmV0dXJuIG4mJlwic3RyaW5nXCI9PXR5cGVvZiBuP1tuXTpufSx0LmdldEhlYWRlcktleXM9ZnVuY3Rpb24oZSl7dmFyIHQ9byhlKSxyPXt9LHM9W107cmV0dXJuIHQua2V5cz9uLml0ZXJhdGVIZWFkZXJzS2V5cyh0LGZ1bmN0aW9uKGUpe3JbZV18fChyW2VdPSEwLHMucHVzaChlKSl9KTp0LmZvckVhY2g/dC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7clt0XXx8KHJbdF09ITAscy5wdXNoKHQpKX0pOm4uaXRlcmF0ZUhlYWRlcnModCxmdW5jdGlvbihlKXt2YXIgdD1lWzBdO3JbdF18fChyW3RdPSEwLHMucHVzaCh0KSl9KSxzfSx0LnNwbGl0SGVhZGVyVmFsdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUuc3BsaXQoXCIsIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSl9KSx0fX1dKX0sZS5leHBvcnRzPW4oKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNSksbz1mdW5jdGlvbihlKXtyZXR1cm4gbi5Dcm9zc0Jyb3dzZXJIdHRwVHJhbnNwb3J0KHt3aXRoQ3JlZGVudGlhbHM6ITF9KShlKX07dC5zZXREZWZhdWx0VHJhbnNwb3J0RmFjdG9yeT1mdW5jdGlvbihlKXtvPWV9LHQubWFrZURlZmF1bHRUcmFuc3BvcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig2KSxvPXIoNyk7dC5Dcm9zc0Jyb3dzZXJIdHRwVHJhbnNwb3J0PWZ1bmN0aW9uKGUpe2lmKG4uZGV0ZWN0RmV0Y2hTdXBwb3J0KCkpe3ZhciB0PXtjcmVkZW50aWFsczplLndpdGhDcmVkZW50aWFscz9cImluY2x1ZGVcIjpcInNhbWUtb3JpZ2luXCJ9O3JldHVybiBuLkZldGNoUmVhZGFibGVTdHJlYW1UcmFuc3BvcnQodCl9cmV0dXJuIG8uWGhyVHJhbnNwb3J0KHt3aXRoQ3JlZGVudGlhbHM6ZS53aXRoQ3JlZGVudGlhbHN9KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybihuPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBvIGluIHQ9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG8pJiYoZVtvXT10W29dKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigwKSxzPXIoMSk7dC5GZXRjaFJlYWRhYmxlU3RyZWFtVHJhbnNwb3J0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5kZWJ1ZyYmcy5kZWJ1ZyhcImZldGNoUmVxdWVzdFwiLGUpLG5ldyBpKGUsdCl9KHQsZSl9fTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmNhbmNlbGxlZD0hMSx0aGlzLmNvbnRyb2xsZXI9c2VsZi5BYm9ydENvbnRyb2xsZXImJm5ldyBBYm9ydENvbnRyb2xsZXIsdGhpcy5vcHRpb25zPWUsdGhpcy5pbml0PXR9cmV0dXJuIGUucHJvdG90eXBlLnB1bXA9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHRoaXMucmVhZGVyPWUsdGhpcy5jYW5jZWxsZWQpcmV0dXJuIHRoaXMub3B0aW9ucy5kZWJ1ZyYmcy5kZWJ1ZyhcIkZldGNoLnB1bXAuY2FuY2VsIGF0IGZpcnN0IHB1bXBcIiksdm9pZCB0aGlzLnJlYWRlci5jYW5jZWwoKTt0aGlzLnJlYWRlci5yZWFkKCkudGhlbihmdW5jdGlvbihlKXtpZihlLmRvbmUpcmV0dXJuIHIub3B0aW9ucy5vbkVuZCgpLHQ7ci5vcHRpb25zLm9uQ2h1bmsoZS52YWx1ZSksci5wdW1wKHIucmVhZGVyLHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7ci5jYW5jZWxsZWQ/ci5vcHRpb25zLmRlYnVnJiZzLmRlYnVnKFwiRmV0Y2guY2F0Y2ggLSByZXF1ZXN0IGNhbmNlbGxlZFwiKTooci5jYW5jZWxsZWQ9ITAsci5vcHRpb25zLmRlYnVnJiZzLmRlYnVnKFwiRmV0Y2guY2F0Y2hcIixlLm1lc3NhZ2UpLHIub3B0aW9ucy5vbkVuZChlKSl9KX0sZS5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2ZldGNoKHRoaXMub3B0aW9ucy51cmwsbih7fSx0aGlzLmluaXQse2hlYWRlcnM6dGhpcy5tZXRhZGF0YS50b0hlYWRlcnMoKSxtZXRob2Q6XCJQT1NUXCIsYm9keTplLHNpZ25hbDp0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5zaWduYWx9KSkudGhlbihmdW5jdGlvbihlKXtpZih0Lm9wdGlvbnMuZGVidWcmJnMuZGVidWcoXCJGZXRjaC5yZXNwb25zZVwiLGUpLHQub3B0aW9ucy5vbkhlYWRlcnMobmV3IG8uTWV0YWRhdGEoZS5oZWFkZXJzKSxlLnN0YXR1cyksIWUuYm9keSlyZXR1cm4gZTt0LnB1bXAoZS5ib2R5LmdldFJlYWRlcigpLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7dC5jYW5jZWxsZWQ/dC5vcHRpb25zLmRlYnVnJiZzLmRlYnVnKFwiRmV0Y2guY2F0Y2ggLSByZXF1ZXN0IGNhbmNlbGxlZFwiKToodC5jYW5jZWxsZWQ9ITAsdC5vcHRpb25zLmRlYnVnJiZzLmRlYnVnKFwiRmV0Y2guY2F0Y2hcIixlLm1lc3NhZ2UpLHQub3B0aW9ucy5vbkVuZChlKSl9KX0sZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSl7dGhpcy5zZW5kKGUpfSxlLnByb3RvdHlwZS5maW5pc2hTZW5kPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXt0aGlzLm1ldGFkYXRhPWV9LGUucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuY2FuY2VsbGVkP3RoaXMub3B0aW9ucy5kZWJ1ZyYmcy5kZWJ1ZyhcIkZldGNoLmFib3J0LmNhbmNlbCBhbHJlYWR5IGNhbmNlbGxlZFwiKToodGhpcy5jYW5jZWxsZWQ9ITAsdGhpcy5yZWFkZXI/KHRoaXMub3B0aW9ucy5kZWJ1ZyYmcy5kZWJ1ZyhcIkZldGNoLmFib3J0LmNhbmNlbFwiKSx0aGlzLnJlYWRlci5jYW5jZWwoKSk6dGhpcy5vcHRpb25zLmRlYnVnJiZzLmRlYnVnKFwiRmV0Y2guYWJvcnQuY2FuY2VsIGJlZm9yZSByZWFkZXJcIiksdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSl9LGV9KCk7dC5kZXRlY3RGZXRjaFN1cHBvcnQ9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUmVzcG9uc2UmJlJlc3BvbnNlLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcImJvZHlcIikmJlwiZnVuY3Rpb25cIj09dHlwZW9mIEhlYWRlcnN9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KG49ZnVuY3Rpb24oZSx0KXtyZXR1cm4obj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKX0pKGUsdCl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1uKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9cigwKSxpPXIoMSksYT1yKDExKTt0LlhoclRyYW5zcG9ydD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoYS5kZXRlY3RNb3pYSFJTdXBwb3J0KCkpcmV0dXJuIG5ldyBkKHQsZSk7aWYoYS5kZXRlY3RYSFJPdmVycmlkZU1pbWVUeXBlU3VwcG9ydCgpKXJldHVybiBuZXcgdSh0LGUpO3Rocm93IG5ldyBFcnJvcihcIlRoaXMgZW52aXJvbm1lbnQncyBYSFIgaW1wbGVtZW50YXRpb24gY2Fubm90IHN1cHBvcnQgYmluYXJ5IHRyYW5zZmVyLlwiKX19O3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMub3B0aW9ucz1lLHRoaXMuaW5pdD10fXJldHVybiBlLnByb3RvdHlwZS5vblByb2dyZXNzRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGVidWcmJmkuZGVidWcoXCJYSFIub25Qcm9ncmVzc0V2ZW50Lmxlbmd0aDogXCIsdGhpcy54aHIucmVzcG9uc2UubGVuZ3RoKTt2YXIgZT10aGlzLnhoci5yZXNwb25zZS5zdWJzdHIodGhpcy5pbmRleCk7dGhpcy5pbmRleD10aGlzLnhoci5yZXNwb25zZS5sZW5ndGg7dmFyIHQ9cChlKTt0aGlzLm9wdGlvbnMub25DaHVuayh0KX0sZS5wcm90b3R5cGUub25Mb2FkRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGVidWcmJmkuZGVidWcoXCJYSFIub25Mb2FkRXZlbnRcIiksdGhpcy5vcHRpb25zLm9uRW5kKCl9LGUucHJvdG90eXBlLm9uU3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGVidWcmJmkuZGVidWcoXCJYSFIub25TdGF0ZUNoYW5nZVwiLHRoaXMueGhyLnJlYWR5U3RhdGUpLHRoaXMueGhyLnJlYWR5U3RhdGU9PT1YTUxIdHRwUmVxdWVzdC5IRUFERVJTX1JFQ0VJVkVEJiZ0aGlzLm9wdGlvbnMub25IZWFkZXJzKG5ldyBzLk1ldGFkYXRhKHRoaXMueGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSx0aGlzLnhoci5zdGF0dXMpfSxlLnByb3RvdHlwZS5zZW5kTWVzc2FnZT1mdW5jdGlvbihlKXt0aGlzLnhoci5zZW5kKGUpfSxlLnByb3RvdHlwZS5maW5pc2hTZW5kPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMubWV0YWRhdGE9ZTt2YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7dGhpcy54aHI9cixyLm9wZW4oXCJQT1NUXCIsdGhpcy5vcHRpb25zLnVybCksdGhpcy5jb25maWd1cmVYaHIoKSx0aGlzLm1ldGFkYXRhLmZvckVhY2goZnVuY3Rpb24oZSx0KXtyLnNldFJlcXVlc3RIZWFkZXIoZSx0LmpvaW4oXCIsIFwiKSl9KSxyLndpdGhDcmVkZW50aWFscz1Cb29sZWFuKHRoaXMuaW5pdC53aXRoQ3JlZGVudGlhbHMpLHIuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIix0aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSksci5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIix0aGlzLm9uUHJvZ3Jlc3NFdmVudC5iaW5kKHRoaXMpKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZW5kXCIsdGhpcy5vbkxvYWRFdmVudC5iaW5kKHRoaXMpKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKGUpe3Qub3B0aW9ucy5kZWJ1ZyYmaS5kZWJ1ZyhcIlhIUi5lcnJvclwiLGUpLHQub3B0aW9ucy5vbkVuZChlLmVycm9yKX0pfSxlLnByb3RvdHlwZS5jb25maWd1cmVYaHI9ZnVuY3Rpb24oKXt0aGlzLnhoci5yZXNwb25zZVR5cGU9XCJ0ZXh0XCIsdGhpcy54aHIub3ZlcnJpZGVNaW1lVHlwZShcInRleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWRcIil9LGUucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMub3B0aW9ucy5kZWJ1ZyYmaS5kZWJ1ZyhcIlhIUi5hYm9ydFwiKSx0aGlzLnhoci5hYm9ydCgpfSxlfSgpO3QuWEhSPXU7dmFyIGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5jb25maWd1cmVYaHI9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZGVidWcmJmkuZGVidWcoXCJNb3pYSFIuY29uZmlndXJlWGhyOiBzZXR0aW5nIHJlc3BvbnNlVHlwZSB0byAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInXCIpLHRoaXMueGhyLnJlc3BvbnNlVHlwZT1cIm1vei1jaHVua2VkLWFycmF5YnVmZmVyXCJ9LHQucHJvdG90eXBlLm9uUHJvZ3Jlc3NFdmVudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMueGhyLnJlc3BvbnNlO3RoaXMub3B0aW9ucy5kZWJ1ZyYmaS5kZWJ1ZyhcIk1velhIUi5vblByb2dyZXNzRXZlbnQ6IFwiLG5ldyBVaW50OEFycmF5KGUpKSx0aGlzLm9wdGlvbnMub25DaHVuayhuZXcgVWludDhBcnJheShlKSl9LHR9KHUpO2Z1bmN0aW9uIGMoZSx0KXt2YXIgcj1lLmNoYXJDb2RlQXQodCk7aWYocj49NTUyOTYmJnI8PTU2MzE5KXt2YXIgbj1lLmNoYXJDb2RlQXQodCsxKTtuPj01NjMyMCYmbjw9NTczNDMmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApKX1yZXR1cm4gcn1mdW5jdGlvbiBwKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShlLmxlbmd0aCkscj0wLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89U3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdD9lLmNvZGVQb2ludEF0KG4pOmMoZSxuKTt0W3IrK109MjU1Jm99cmV0dXJuIHR9dC5Nb3pDaHVua2VkQXJyYXlCdWZmZXJYSFI9ZCx0LnN0cmluZ1RvQXJyYXlCdWZmZXI9cH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuLG89cigwKSxzPWZ1bmN0aW9uKGUpe3JldHVybiA5PT09ZXx8MTA9PT1lfHwxMz09PWV9O2Z1bmN0aW9uIGkoZSl7cmV0dXJuIHMoZSl8fGU+PTMyJiZlPD0xMjZ9ZnVuY3Rpb24gYShlKXtmb3IodmFyIHQ9MDt0IT09ZS5sZW5ndGg7Kyt0KWlmKCFpKGVbdF0pKXRocm93IG5ldyBFcnJvcihcIk1ldGFkYXRhIGlzIG5vdCB2YWxpZCAocHJpbnRhYmxlKSBBU0NJSVwiKTtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIDEyOD09KDEyOCZlLmdldFVpbnQ4KDApKX1mdW5jdGlvbiBkKGUpe3JldHVybiBlLmdldFVpbnQzMigxLCExKX1mdW5jdGlvbiBjKGUsdCxyKXtyZXR1cm4gZS5ieXRlTGVuZ3RoLXQ+PXJ9ZnVuY3Rpb24gcChlLHQscil7aWYoZS5zbGljZSlyZXR1cm4gZS5zbGljZSh0LHIpO3ZhciBuPWUubGVuZ3RoO3ZvaWQgMCE9PXImJihuPXIpO2Zvcih2YXIgbz1uZXcgVWludDhBcnJheShuLXQpLHM9MCxpPXQ7aTxuO2krKylvW3MrK109ZVtpXTtyZXR1cm4gb310LmRlY29kZUFTQ0lJPWEsdC5lbmNvZGVBU0NJST1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpLHI9MDtyIT09ZS5sZW5ndGg7KytyKXt2YXIgbj1lLmNoYXJDb2RlQXQocik7aWYoIWkobikpdGhyb3cgbmV3IEVycm9yKFwiTWV0YWRhdGEgY29udGFpbnMgaW52YWxpZCBBU0NJSVwiKTt0W3JdPW59cmV0dXJuIHR9LGZ1bmN0aW9uKGUpe2VbZS5NRVNTQUdFPTFdPVwiTUVTU0FHRVwiLGVbZS5UUkFJTEVSUz0yXT1cIlRSQUlMRVJTXCJ9KG49dC5DaHVua1R5cGV8fCh0LkNodW5rVHlwZT17fSkpO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuYnVmZmVyPW51bGwsdGhpcy5wb3NpdGlvbj0wfXJldHVybiBlLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKDA9PT1lLmxlbmd0aCYmdClyZXR1cm5bXTt2YXIgcixzPVtdO2lmKG51bGw9PXRoaXMuYnVmZmVyKXRoaXMuYnVmZmVyPWUsdGhpcy5wb3NpdGlvbj0wO2Vsc2UgaWYodGhpcy5wb3NpdGlvbj09PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhpcy5idWZmZXI9ZSx0aGlzLnBvc2l0aW9uPTA7ZWxzZXt2YXIgaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb24saD1uZXcgVWludDhBcnJheShpK2UuYnl0ZUxlbmd0aCksZj1wKHRoaXMuYnVmZmVyLHRoaXMucG9zaXRpb24pO2guc2V0KGYsMCk7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoZSk7aC5zZXQobCxpKSx0aGlzLmJ1ZmZlcj1oLHRoaXMucG9zaXRpb249MH1mb3IoOzspe2lmKCFjKHRoaXMuYnVmZmVyLHRoaXMucG9zaXRpb24sNSkpcmV0dXJuIHM7dmFyIGc9cCh0aGlzLmJ1ZmZlcix0aGlzLnBvc2l0aW9uLHRoaXMucG9zaXRpb24rNSksYj1uZXcgRGF0YVZpZXcoZy5idWZmZXIsZy5ieXRlT2Zmc2V0LGcuYnl0ZUxlbmd0aCkseT1kKGIpO2lmKCFjKHRoaXMuYnVmZmVyLHRoaXMucG9zaXRpb24sNSt5KSlyZXR1cm4gczt2YXIgdj1wKHRoaXMuYnVmZmVyLHRoaXMucG9zaXRpb24rNSx0aGlzLnBvc2l0aW9uKzUreSk7aWYodGhpcy5wb3NpdGlvbis9NSt5LHUoYikpcmV0dXJuIHMucHVzaCh7Y2h1bmtUeXBlOm4uVFJBSUxFUlMsdHJhaWxlcnM6KHI9dixuZXcgby5NZXRhZGF0YShhKHIpKSl9KSxzO3MucHVzaCh7Y2h1bmtUeXBlOm4uTUVTU0FHRSxkYXRhOnZ9KX19LGV9KCk7dC5DaHVua1BhcnNlcj1ofSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG47T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZnVuY3Rpb24oZSl7ZVtlLk9LPTBdPVwiT0tcIixlW2UuQ2FuY2VsZWQ9MV09XCJDYW5jZWxlZFwiLGVbZS5Vbmtub3duPTJdPVwiVW5rbm93blwiLGVbZS5JbnZhbGlkQXJndW1lbnQ9M109XCJJbnZhbGlkQXJndW1lbnRcIixlW2UuRGVhZGxpbmVFeGNlZWRlZD00XT1cIkRlYWRsaW5lRXhjZWVkZWRcIixlW2UuTm90Rm91bmQ9NV09XCJOb3RGb3VuZFwiLGVbZS5BbHJlYWR5RXhpc3RzPTZdPVwiQWxyZWFkeUV4aXN0c1wiLGVbZS5QZXJtaXNzaW9uRGVuaWVkPTddPVwiUGVybWlzc2lvbkRlbmllZFwiLGVbZS5SZXNvdXJjZUV4aGF1c3RlZD04XT1cIlJlc291cmNlRXhoYXVzdGVkXCIsZVtlLkZhaWxlZFByZWNvbmRpdGlvbj05XT1cIkZhaWxlZFByZWNvbmRpdGlvblwiLGVbZS5BYm9ydGVkPTEwXT1cIkFib3J0ZWRcIixlW2UuT3V0T2ZSYW5nZT0xMV09XCJPdXRPZlJhbmdlXCIsZVtlLlVuaW1wbGVtZW50ZWQ9MTJdPVwiVW5pbXBsZW1lbnRlZFwiLGVbZS5JbnRlcm5hbD0xM109XCJJbnRlcm5hbFwiLGVbZS5VbmF2YWlsYWJsZT0xNF09XCJVbmF2YWlsYWJsZVwiLGVbZS5EYXRhTG9zcz0xNV09XCJEYXRhTG9zc1wiLGVbZS5VbmF1dGhlbnRpY2F0ZWQ9MTZdPVwiVW5hdXRoZW50aWNhdGVkXCJ9KG49dC5Db2RlfHwodC5Db2RlPXt9KSksdC5odHRwU3RhdHVzVG9Db2RlPWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIDA6cmV0dXJuIG4uSW50ZXJuYWw7Y2FzZSAyMDA6cmV0dXJuIG4uT0s7Y2FzZSA0MDA6cmV0dXJuIG4uSW52YWxpZEFyZ3VtZW50O2Nhc2UgNDAxOnJldHVybiBuLlVuYXV0aGVudGljYXRlZDtjYXNlIDQwMzpyZXR1cm4gbi5QZXJtaXNzaW9uRGVuaWVkO2Nhc2UgNDA0OnJldHVybiBuLk5vdEZvdW5kO2Nhc2UgNDA5OnJldHVybiBuLkFib3J0ZWQ7Y2FzZSA0MTI6cmV0dXJuIG4uRmFpbGVkUHJlY29uZGl0aW9uO2Nhc2UgNDI5OnJldHVybiBuLlJlc291cmNlRXhoYXVzdGVkO2Nhc2UgNDk5OnJldHVybiBuLkNhbmNlbGVkO2Nhc2UgNTAwOnJldHVybiBuLlVua25vd247Y2FzZSA1MDE6cmV0dXJuIG4uVW5pbXBsZW1lbnRlZDtjYXNlIDUwMzpyZXR1cm4gbi5VbmF2YWlsYWJsZTtjYXNlIDUwNDpyZXR1cm4gbi5EZWFkbGluZUV4Y2VlZGVkO2RlZmF1bHQ6cmV0dXJuIG4uVW5rbm93bn19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPXIoNCkscz1yKDYpLGk9cigxMiksYT1yKDcpLHU9cig1KSxkPXIoOSksYz1yKDEzKSxwPXIoMTUpLGg9cigyKTshZnVuY3Rpb24oZSl7ZS5zZXREZWZhdWx0VHJhbnNwb3J0PW8uc2V0RGVmYXVsdFRyYW5zcG9ydEZhY3RvcnksZS5Dcm9zc0Jyb3dzZXJIdHRwVHJhbnNwb3J0PXUuQ3Jvc3NCcm93c2VySHR0cFRyYW5zcG9ydCxlLkZldGNoUmVhZGFibGVTdHJlYW1UcmFuc3BvcnQ9cy5GZXRjaFJlYWRhYmxlU3RyZWFtVHJhbnNwb3J0LGUuWGhyVHJhbnNwb3J0PWEuWGhyVHJhbnNwb3J0LGUuV2Vic29ja2V0VHJhbnNwb3J0PWkuV2Vic29ja2V0VHJhbnNwb3J0LGUuQ29kZT1kLkNvZGUsZS5NZXRhZGF0YT1uLkJyb3dzZXJIZWFkZXJzLGUuY2xpZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGguY2xpZW50KGUsdCl9LGUuaW52b2tlPWMuaW52b2tlLGUudW5hcnk9cC51bmFyeX0odC5ncnBjfHwodC5ncnBjPXt9KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbjtmdW5jdGlvbiBvKCl7aWYodm9pZCAwIT09bilyZXR1cm4gbjtpZihYTUxIdHRwUmVxdWVzdCl7bj1uZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e24ub3BlbihcIkdFVFwiLFwiaHR0cHM6Ly9sb2NhbGhvc3RcIil9Y2F0Y2goZSl7fX1yZXR1cm4gbn1mdW5jdGlvbiBzKGUpe3ZhciB0PW8oKTtpZighdClyZXR1cm4hMTt0cnl7cmV0dXJuIHQucmVzcG9uc2VUeXBlPWUsdC5yZXNwb25zZVR5cGU9PT1lfWNhdGNoKGUpe31yZXR1cm4hMX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnhoclN1cHBvcnRzUmVzcG9uc2VUeXBlPXMsdC5kZXRlY3RNb3pYSFJTdXBwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0JiZzKFwibW96LWNodW5rZWQtYXJyYXlidWZmZXJcIil9LHQuZGV0ZWN0WEhST3ZlcnJpZGVNaW1lVHlwZVN1cHBvcnQ9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3QmJlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShcIm92ZXJyaWRlTWltZVR5cGVcIil9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG4sbz1yKDEpLHM9cig4KTshZnVuY3Rpb24oZSl7ZVtlLkZJTklTSF9TRU5EPTFdPVwiRklOSVNIX1NFTkRcIn0obnx8KG49e30pKTt2YXIgaT1uZXcgVWludDhBcnJheShbMV0pO3QuV2Vic29ja2V0VHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlKXtlLmRlYnVnJiZvLmRlYnVnKFwid2Vic29ja2V0UmVxdWVzdFwiLGUpO3ZhciB0LHI9ZnVuY3Rpb24oZSl7aWYoXCJodHRwczovL1wiPT09ZS5zdWJzdHIoMCw4KSlyZXR1cm5cIndzczovL1wiK2Uuc3Vic3RyKDgpO2lmKFwiaHR0cDovL1wiPT09ZS5zdWJzdHIoMCw3KSlyZXR1cm5cIndzOi8vXCIrZS5zdWJzdHIoNyk7dGhyb3cgbmV3IEVycm9yKFwiV2Vic29ja2V0IHRyYW5zcG9ydCBjb25zdHJ1Y3RlZCB3aXRoIG5vbi1odHRwczovLyBvciBodHRwOi8vIGhvc3QuXCIpfShlLnVybCksYT1bXTtmdW5jdGlvbiB1KGUpe2lmKGU9PT1uLkZJTklTSF9TRU5EKXQuc2VuZChpKTtlbHNle3ZhciByPWUsbz1uZXcgSW50OEFycmF5KHIuYnl0ZUxlbmd0aCsxKTtvLnNldChuZXcgVWludDhBcnJheShbMF0pKSxvLnNldChyLDEpLHQuc2VuZChvKX19cmV0dXJue3NlbmRNZXNzYWdlOmZ1bmN0aW9uKGUpe3QmJnQucmVhZHlTdGF0ZSE9PXQuQ09OTkVDVElORz91KGUpOmEucHVzaChlKX0sZmluaXNoU2VuZDpmdW5jdGlvbigpe3QmJnQucmVhZHlTdGF0ZSE9PXQuQ09OTkVDVElORz91KG4uRklOSVNIX1NFTkQpOmEucHVzaChuLkZJTklTSF9TRU5EKX0sc3RhcnQ6ZnVuY3Rpb24obil7KHQ9bmV3IFdlYlNvY2tldChyLFtcImdycGMtd2Vic29ja2V0c1wiXSkpLmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiLHQub25vcGVuPWZ1bmN0aW9uKCl7dmFyIHI7ZS5kZWJ1ZyYmby5kZWJ1ZyhcIndlYnNvY2tldFJlcXVlc3Qub25vcGVuXCIpLHQuc2VuZCgocj1cIlwiLG4uZm9yRWFjaChmdW5jdGlvbihlLHQpe3IrPWUrXCI6IFwiK3Quam9pbihcIiwgXCIpK1wiXFxyXFxuXCJ9KSxzLmVuY29kZUFTQ0lJKHIpKSksYS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3UoZSl9KX0sdC5vbmNsb3NlPWZ1bmN0aW9uKHQpe2UuZGVidWcmJm8uZGVidWcoXCJ3ZWJzb2NrZXRSZXF1ZXN0Lm9uY2xvc2VcIix0KSxlLm9uRW5kKCl9LHQub25lcnJvcj1mdW5jdGlvbih0KXtlLmRlYnVnJiZvLmRlYnVnKFwid2Vic29ja2V0UmVxdWVzdC5vbmVycm9yXCIsdCl9LHQub25tZXNzYWdlPWZ1bmN0aW9uKHQpe2Uub25DaHVuayhuZXcgVWludDhBcnJheSh0LmRhdGEpKX19LGNhbmNlbDpmdW5jdGlvbigpe2UuZGVidWcmJm8uZGVidWcoXCJ3ZWJzb2NrZXQuYWJvcnRcIiksdC5jbG9zZSgpfX19KGUpfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDIpO3QuaW52b2tlPWZ1bmN0aW9uKGUsdCl7aWYoZS5yZXF1ZXN0U3RyZWFtKXRocm93IG5ldyBFcnJvcihcIi5pbnZva2UgY2Fubm90IGJlIHVzZWQgd2l0aCBjbGllbnQtc3RyZWFtaW5nIG1ldGhvZHMuIFVzZSAuY2xpZW50IGluc3RlYWQuXCIpO3ZhciByPW4uY2xpZW50KGUse2hvc3Q6dC5ob3N0LHRyYW5zcG9ydDp0LnRyYW5zcG9ydCxkZWJ1Zzp0LmRlYnVnfSk7cmV0dXJuIHQub25IZWFkZXJzJiZyLm9uSGVhZGVycyh0Lm9uSGVhZGVycyksdC5vbk1lc3NhZ2UmJnIub25NZXNzYWdlKHQub25NZXNzYWdlKSx0Lm9uRW5kJiZyLm9uRW5kKHQub25FbmQpLHIuc3RhcnQodC5tZXRhZGF0YSksci5zZW5kKHQucmVxdWVzdCksci5maW5pc2hTZW5kKCkse2Nsb3NlOmZ1bmN0aW9uKCl7ci5jbG9zZSgpfX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5mcmFtZVJlcXVlc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXJpYWxpemVCaW5hcnkoKSxyPW5ldyBBcnJheUJ1ZmZlcih0LmJ5dGVMZW5ndGgrNSk7cmV0dXJuIG5ldyBEYXRhVmlldyhyLDEsNCkuc2V0VWludDMyKDAsdC5sZW5ndGgsITEpLG5ldyBVaW50OEFycmF5KHIsNSkuc2V0KHQpLG5ldyBVaW50OEFycmF5KHIpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMCksbz1yKDIpO3QudW5hcnk9ZnVuY3Rpb24oZSx0KXtpZihlLnJlc3BvbnNlU3RyZWFtKXRocm93IG5ldyBFcnJvcihcIi51bmFyeSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNlcnZlci1zdHJlYW1pbmcgbWV0aG9kcy4gVXNlIC5pbnZva2Ugb3IgLmNsaWVudCBpbnN0ZWFkLlwiKTtpZihlLnJlcXVlc3RTdHJlYW0pdGhyb3cgbmV3IEVycm9yKFwiLnVuYXJ5IGNhbm5vdCBiZSB1c2VkIHdpdGggY2xpZW50LXN0cmVhbWluZyBtZXRob2RzLiBVc2UgLmNsaWVudCBpbnN0ZWFkLlwiKTt2YXIgcj1udWxsLHM9bnVsbCxpPW8uY2xpZW50KGUse2hvc3Q6dC5ob3N0LHRyYW5zcG9ydDp0LnRyYW5zcG9ydCxkZWJ1Zzp0LmRlYnVnfSk7cmV0dXJuIGkub25IZWFkZXJzKGZ1bmN0aW9uKGUpe3I9ZX0pLGkub25NZXNzYWdlKGZ1bmN0aW9uKGUpe3M9ZX0pLGkub25FbmQoZnVuY3Rpb24oZSxvLGkpe3Qub25FbmQoe3N0YXR1czplLHN0YXR1c01lc3NhZ2U6byxoZWFkZXJzOnJ8fG5ldyBuLk1ldGFkYXRhLG1lc3NhZ2U6cyx0cmFpbGVyczppfSl9KSxpLnN0YXJ0KHQubWV0YWRhdGEpLGkuc2VuZCh0LnJlcXVlc3QpLGkuZmluaXNoU2VuZCgpLHtjbG9zZTpmdW5jdGlvbigpe2kuY2xvc2UoKX19fX1dKX0pOyIsImltcG9ydCB7Z3JwY30gZnJvbSBcIkBpbXByb2JhYmxlLWVuZy9ncnBjLXdlYlwiO1xuaW1wb3J0IHtBdXRofSBmcm9tIFwiLi4vLi4vLi4vY21kL2F1dGgvZ3JwYy9hdXRoX3BiX3NlcnZpY2VcIjtcbmltcG9ydCB7U3Vic2NyaWJlfSBmcm9tIFwiLi4vLi4vLi4vcGtnL2FjY291bnQvZHRvL2FjY291bnRfcGJcIjtcblxuZnVuY3Rpb24gc3Vic2NyaWJlKCkge1xuICBjb25zdCBzdWIgPSBuZXcgU3Vic2NyaWJlKCk7XG4gIHN1Yi5zZXRBbGlhcyhcInRlc3RfZ3JwY3dlYlwiKVxuICBzdWIuc2V0RW1haWwoXCJ0ZXN0X2dycGN3ZWJAdGVzdC5nZ1wiKVxuICBzdWIuc2V0UGFzc3dvcmQoXCJwYXNzd29yZFwiKVxuICBncnBjLnVuYXJ5KEF1dGguU3Vic2NyaWJlLCB7XG4gICAgcmVxdWVzdDogc3ViLFxuICAgIGhvc3Q6IFwiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MFwiLFxuICAgIG9uRW5kOiByZXMgPT4ge1xuICAgICAgY29uc3QgeyBzdGF0dXMsIHN0YXR1c01lc3NhZ2UsIGhlYWRlcnMsIG1lc3NhZ2UsIHRyYWlsZXJzIH0gPSByZXM7XG4gICAgICBjb25zb2xlLmxvZyhcInN1YnNjcmliZS5vbkVuZC5zdGF0dXNcIiwgc3RhdHVzLCBzdGF0dXNNZXNzYWdlKTtcbiAgICAgIGNvbnNvbGUubG9nKFwic3Vic2NyaWJlLm9uRW5kLmhlYWRlcnNcIiwgaGVhZGVycyk7XG4gICAgICBpZiAoc3RhdHVzID09PSBncnBjLkNvZGUuT0sgJiYgbWVzc2FnZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInN1YnNjcmliZS5vbkVuZC5tZXNzYWdlXCIsIG1lc3NhZ2UudG9PYmplY3QoKSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcInN1YnNjcmliZS5vbkVuZC50cmFpbGVyc1wiLCB0cmFpbGVycyk7XG4gICAgLy8gICBxdWVyeUJvb2tzKCk7XG4gICAgfVxuICB9KTtcbn1cblxuc3Vic2NyaWJlKCk7XG5cbi8vIGZ1bmN0aW9uIHF1ZXJ5Qm9va3MoKSB7XG4vLyAgIGNvbnN0IHF1ZXJ5Qm9va3NSZXF1ZXN0ID0gbmV3IFF1ZXJ5Qm9va3NSZXF1ZXN0KCk7XG4vLyAgIHF1ZXJ5Qm9va3NSZXF1ZXN0LnNldEF1dGhvclByZWZpeChcIkdlb3JcIik7XG4vLyAgIGNvbnN0IGNsaWVudCA9IGdycGMuY2xpZW50KEJvb2tTZXJ2aWNlLlF1ZXJ5Qm9va3MsIHtcbi8vICAgICBob3N0OiBob3N0LFxuLy8gICB9KTtcbi8vICAgY2xpZW50Lm9uSGVhZGVycygoaGVhZGVyczogZ3JwYy5NZXRhZGF0YSkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKFwicXVlcnlCb29rcy5vbkhlYWRlcnNcIiwgaGVhZGVycyk7XG4vLyAgIH0pO1xuLy8gICBjbGllbnQub25NZXNzYWdlKChtZXNzYWdlOiBCb29rKSA9PiB7XG4vLyAgICAgY29uc29sZS5sb2coXCJxdWVyeUJvb2tzLm9uTWVzc2FnZVwiLCBtZXNzYWdlLnRvT2JqZWN0KCkpO1xuLy8gICB9KTtcbi8vICAgY2xpZW50Lm9uRW5kKChjb2RlOiBncnBjLkNvZGUsIG1zZzogc3RyaW5nLCB0cmFpbGVyczogZ3JwYy5NZXRhZGF0YSkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKFwicXVlcnlCb29rcy5vbkVuZFwiLCBjb2RlLCBtc2csIHRyYWlsZXJzKTtcbi8vICAgfSk7XG4vLyAgIGNsaWVudC5zdGFydCgpO1xuLy8gICBjbGllbnQuc2VuZChxdWVyeUJvb2tzUmVxdWVzdCk7XG4vLyB9Il0sInNvdXJjZVJvb3QiOiIifQ==